<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.0.2">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"chenwj1103.github.io","root":"/","scheme":"Muse","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"path":"search.xml"};
  </script>

  <meta name="description" content="jdk的性能监控和故障处理工具如下图：  jstat工具 jconsole工具使用 jvisualvm 工具使用 jstack工具使用 jps：虚拟机进程状况工具JPS 名称:jps - Java Virtual Machine Process Status Tool 命令用法123: jps [options] [hostid]              options:命令选项，用来对输出格式">
<meta property="og:type" content="article">
<meta property="og:title" content="深入理解java虚拟机-性能监控与故障处理工具">
<meta property="og:url" content="http://chenwj1103.github.io/2018-10-28/%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3java%E8%99%9A%E6%8B%9F%E6%9C%BA-%E6%80%A7%E8%83%BD%E7%9B%91%E6%8E%A7%E4%B8%8E%E6%95%85%E9%9A%9C%E5%A4%84%E7%90%86%E5%B7%A5%E5%85%B7/index.html">
<meta property="og:site_name" content="茄子的博客">
<meta property="og:description" content="jdk的性能监控和故障处理工具如下图：  jstat工具 jconsole工具使用 jvisualvm 工具使用 jstack工具使用 jps：虚拟机进程状况工具JPS 名称:jps - Java Virtual Machine Process Status Tool 命令用法123: jps [options] [hostid]              options:命令选项，用来对输出格式">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="http://chenwj1103.github.io/images/jvm/JDK%E7%9A%84%E6%95%85%E9%9A%9C%E5%A4%84%E7%90%86%E5%B7%A5%E5%85%B7.png">
<meta property="og:image" content="http://chenwj1103.github.io/images/jvm/JPS%E5%B7%A5%E5%85%B7%E7%9A%84%E4%B8%BB%E8%A6%81%E9%80%89%E9%A1%B9.png">
<meta property="og:image" content="http://chenwj1103.github.io/images/jvm/jps%E6%97%A0%E5%8F%82%E6%95%B0.png">
<meta property="og:image" content="http://chenwj1103.github.io/images/jvm/jps-q%E5%91%BD%E4%BB%A4.png">
<meta property="og:image" content="http://chenwj1103.github.io/images/jvm/jps-m%E7%9A%84%E5%91%BD%E4%BB%A4.png">
<meta property="og:image" content="http://chenwj1103.github.io/images/jvm/jps-m%E5%91%BD%E4%BB%A4.png">
<meta property="og:image" content="http://chenwj1103.github.io/images/jvm/jps-v%E5%91%BD%E4%BB%A4.png">
<meta property="og:image" content="http://chenwj1103.github.io/images/jvm/jstat%E5%B7%A5%E5%85%B7%E7%9A%84%E7%9F%A5%E8%B6%B3%E8%A6%81%E9%80%89%E9%A1%B9.png">
<meta property="og:image" content="http://chenwj1103.github.io/images/jvm/jmap%E5%B7%A5%E5%85%B7%E7%9A%84%E4%B8%BB%E8%A6%81%E9%80%89%E9%A1%B9.png">
<meta property="og:image" content="http://chenwj1103.github.io/images/jvm/jmap%E8%BE%93%E5%87%BA%E4%B8%ADclass-name%E9%9D%9E%E8%87%AA%E5%AE%9A%E4%B9%89%E7%B1%BB%E7%9A%84%E8%AF%B4%E6%98%8E.png">
<meta property="article:published_time" content="2018-10-28T07:10:03.000Z">
<meta property="article:modified_time" content="2020-08-20T17:03:09.840Z">
<meta property="article:author" content="陈伟杰">
<meta property="article:tag" content="性能监控与故障处理工具">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://chenwj1103.github.io/images/jvm/JDK%E7%9A%84%E6%95%85%E9%9A%9C%E5%A4%84%E7%90%86%E5%B7%A5%E5%85%B7.png">

<link rel="canonical" href="http://chenwj1103.github.io/2018-10-28/%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3java%E8%99%9A%E6%8B%9F%E6%9C%BA-%E6%80%A7%E8%83%BD%E7%9B%91%E6%8E%A7%E4%B8%8E%E6%95%85%E9%9A%9C%E5%A4%84%E7%90%86%E5%B7%A5%E5%85%B7/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'zh-CN'
  };
</script>

  <title>深入理解java虚拟机-性能监控与故障处理工具 | 茄子的博客</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">茄子的博客</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description">技术博客</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a>

  </li>
  </ul>
</nav>




</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content post posts-expand">
            

    
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://chenwj1103.github.io/2018-10-28/%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3java%E8%99%9A%E6%8B%9F%E6%9C%BA-%E6%80%A7%E8%83%BD%E7%9B%91%E6%8E%A7%E4%B8%8E%E6%95%85%E9%9A%9C%E5%A4%84%E7%90%86%E5%B7%A5%E5%85%B7/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="陈伟杰">
      <meta itemprop="description" content="学习，坚持。">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="茄子的博客">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          深入理解java虚拟机-性能监控与故障处理工具
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2018-10-28 15:10:03" itemprop="dateCreated datePublished" datetime="2018-10-28T15:10:03+08:00">2018-10-28</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2020-08-21 01:03:09" itemprop="dateModified" datetime="2020-08-21T01:03:09+08:00">2020-08-21</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/jvm/" itemprop="url" rel="index"><span itemprop="name">jvm</span></a>
                </span>
            </span>

          <br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>11k</span>
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>10 分钟</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <p>jdk的性能监控和故障处理工具如下图：</p>
<p><img src="/images/jvm/JDK%E7%9A%84%E6%95%85%E9%9A%9C%E5%A4%84%E7%90%86%E5%B7%A5%E5%85%B7.png" alt="JDK的故障处理工具"></p>
<p><a target="_blank" rel="noopener" href="http://www.51testing.com/html/92/77492-203728.html">jstat工具</a></p>
<p><a target="_blank" rel="noopener" href="https://www.cnblogs.com/baihuitestsoftware/articles/6405580.html">jconsole工具使用</a></p>
<p><a target="_blank" rel="noopener" href="https://www.cnblogs.com/kongzhongqijing/articles/3625340.html">jvisualvm 工具使用</a></p>
<p><a target="_blank" rel="noopener" href="https://www.cnblogs.com/kongzhongqijing/articles/3630264.html">jstack工具使用</a></p>
<h1 id="jps：虚拟机进程状况工具"><a href="#jps：虚拟机进程状况工具" class="headerlink" title="jps：虚拟机进程状况工具"></a>jps：虚拟机进程状况工具</h1><h2 id="JPS-名称"><a href="#JPS-名称" class="headerlink" title="JPS 名称:"></a>JPS 名称:</h2><p>jps - Java Virtual Machine Process Status Tool</p>
<h2 id="命令用法"><a href="#命令用法" class="headerlink" title="命令用法"></a>命令用法</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">: jps [options] [hostid]</span><br><span class="line">              options:命令选项，用来对输出格式进行控制</span><br><span class="line">              hostid:指定特定主机，可以是ip地址和域名, 也可以指定具体协议，端口。</span><br></pre></td></tr></table></figure>
<h2 id="功能描述"><a href="#功能描述" class="headerlink" title="功能描述"></a>功能描述</h2><p>jps是用于查看有权访问的hotspot虚拟机的进程. 当未指定hostid时，默认查看本机jvm进程，否者查看指定的hostid机器上的jvm进程，此时hostid所指机器必须开启jstatd服务。 jps可以列出jvm进程lvmid，主类类名，main函数参数, jvm参数，jar名称等信息。</p>
<p><img src="/images/jvm/JPS%E5%B7%A5%E5%85%B7%E7%9A%84%E4%B8%BB%E8%A6%81%E9%80%89%E9%A1%B9.png" alt="JPS工具的主要选项"></p>
<p>例子：</p>
<ul>
<li>没添加option的时候，默认列出VM标示符号和简单的class或jar名称.如下:</li>
</ul>
<p><img src="/images/jvm/jps%E6%97%A0%E5%8F%82%E6%95%B0.png" alt="jps无参数"></p>
<ul>
<li>-q 仅仅显示VM 标示，不显示jar,class, main参数等信息.</li>
</ul>
<p><img src="/images/jvm/jps-q%E5%91%BD%E4%BB%A4.png" alt="jps-q命令"></p>
<ul>
<li>-m 输出主函数传入的参数. 下的hello 就是在执行程序时从命令行输入的参数</li>
</ul>
<p><img src="/images/jvm/jps-m%E7%9A%84%E5%91%BD%E4%BB%A4.png" alt="jps-m的命令"></p>
<ul>
<li>-l: 输出应用程序主类完整package名称或jar完整名称.</li>
</ul>
<p><img src="/images/jvm/jps-m%E5%91%BD%E4%BB%A4.png" alt="jps-m命令"></p>
<ul>
<li>-v: 列出jvm参数, -Xms20m -Xmx50m是启动程序指定的jvm参数</li>
</ul>
<p><img src="/images/jvm/jps-v%E5%91%BD%E4%BB%A4.png" alt="jps-v命令"></p>
<h1 id="jstat-监视JVM内存工具"><a href="#jstat-监视JVM内存工具" class="headerlink" title="jstat 监视JVM内存工具"></a>jstat 监视JVM内存工具</h1><p>jstat（JVM Statistics Monitoring Tool）是用于监视虚拟机各种运行状态信息的命令行工具。它可以显示本地或者远程 [1] 虚拟机进程中的类装载、内存、垃圾收集、JIT编译等运行数据</p>
<p><img src="/images/jvm/jstat%E5%B7%A5%E5%85%B7%E7%9A%84%E7%9F%A5%E8%B6%B3%E8%A6%81%E9%80%89%E9%A1%B9.png" alt="jstat工具的知足要选项"></p>
<h2 id="语法结构："><a href="#语法结构：" class="headerlink" title="语法结构："></a>语法结构：</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">Usage: jstat -help|-options</span><br><span class="line">       jstat -&lt;option&gt; [-t] [-h&lt;lines&gt;] &lt;vmid&gt; [&lt;interval&gt; [&lt;count&gt;]]</span><br><span class="line">       </span><br><span class="line">参数解释</span><br><span class="line"></span><br><span class="line">Options — 选项，我们一般使用 -gcutil 查看gc情况</span><br><span class="line">vmid    — VM的进程号，即当前运行的java进程号</span><br><span class="line">interval– 间隔时间，单位为秒或者毫秒</span><br><span class="line">count   — 打印次数，如果缺省则打印无数次</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>结果项解释：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">S0  — Heap上的 Survivor space 0 区已使用空间的百分比</span><br><span class="line">S1  — Heap上的 Survivor space 1 区已使用空间的百分比</span><br><span class="line">E   — Heap上的 Eden space 区已使用空间的百分比</span><br><span class="line">O   — Heap上的 Old space 区已使用空间的百分比</span><br><span class="line">P   — Perm space 区已使用空间的百分比</span><br><span class="line">YGC — 从应用程序启动到采样时发生 Young GC 的次数</span><br><span class="line">YGCT– 从应用程序启动到采样时 Young GC 所用的时间(单位秒)</span><br><span class="line">FGC — 从应用程序启动到采样时发生 Full GC 的次数</span><br><span class="line">FGCT– 从应用程序启动到采样时 Full GC 所用的时间(单位秒)</span><br><span class="line">GCT — 从应用程序启动到采样时用于垃圾回收的总时间(单位秒)</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<ul>
<li>使用实例1：</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost bin]# jstat -gcutil 25444</span><br><span class="line">  S0     S1     E      O      P     YGC     YGCT    FGC    FGCT     GCT</span><br><span class="line"> 11.63   0.00   56.46  66.92  98.49 162    0.248    6      0.331    0.579</span><br></pre></td></tr></table></figure>
<ul>
<li>使用实例2  jstat -gcutil</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">(25444是java的进程号，ps -ef | grep java)</span><br><span class="line"></span><br><span class="line">[root@localhost bin]# jstat -gcutil 25444 1000 5</span><br><span class="line">  S0     S1     E      O      P     YGC     YGCT    FGC    FGCT     GCT</span><br><span class="line"> 73.54   0.00  99.04  67.52  98.49    166    0.252     6    0.331    0.583</span><br><span class="line"> 73.54   0.00  99.04  67.52  98.49    166    0.252     6    0.331    0.583</span><br><span class="line"> 73.54   0.00  99.04  67.52  98.49    166    0.252     6    0.331    0.583</span><br><span class="line"> 73.54   0.00  99.04  67.52  98.49    166    0.252     6    0.331    0.583</span><br><span class="line"> 73.54   0.00  99.04  67.52  98.49    166    0.252     6    0.331    0.583</span><br><span class="line"></span><br><span class="line">我们可以看到，5次young gc之后，垃圾内存被从Eden space区(E)放入了Old space区(O)，并引起了百分比的变化，</span><br><span class="line">导致Survivor space使用的百分比从73.54%(S0)降到0%(S1)。有效释放了内存空间。绿框中，我们可以看到，一次full </span><br><span class="line">gc之后，Old space区(O)的内存被回收，从99.05%降到67.52%。图中同时打印了young gc和full gc的总次数、总耗时。</span><br><span class="line">而，每次young gc消耗的时间，可以用相间隔的两行YGCT相减得到。每次full gc消耗的时间，可以用相隔的两行FGCT相减得到。</span><br><span class="line">例如红框中表示的第一行、第二行之间发生了1次young gc，消耗的时间为0.252-0.252＝0.0秒。常驻内存区(P)的使用率，</span><br><span class="line">始终停留在98.49%左右，说明常驻内存没有突变，比较正常。如果young gc和full gc能够正常发生，而且都能有效回收内存，</span><br><span class="line">常驻内存区变化不明显，则说明java内存释放情况正常，垃圾回收及时，java内存泄露的几率就会大大降低。但也不能说明一定没有内存泄露。</span><br><span class="line"></span><br><span class="line">GCT 是YGCT 和FGCT的时间总和。</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<ul>
<li>使用实例3 jstat -class pid</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">jstat -class pid:显示加载class的数量，及所占空间等信息。</span><br><span class="line"></span><br><span class="line">[root@localhost bin]# ps -ef | grep java</span><br><span class="line">root     25917     1  2 23:23 pts&#x2F;2    00:00:05 &#x2F;usr&#x2F;local&#x2F;jdk1.5&#x2F;bin&#x2F;java -Djava.endorsed.dirs&#x3D;&#x2F;usr&#x2F;local&#x2F;jakarta-tomcat-5.0.30&#x2F;common&#x2F;endorsed -classpath &#x2F;usr&#x2F;local&#x2F;jdk1.5&#x2F;lib&#x2F;tools.jar:&#x2F;usr&#x2F;local&#x2F;jakarta-tomcat-5.0.30&#x2F;bin&#x2F;bootstrap.jar:&#x2F;usr&#x2F;local&#x2F;jakarta-tomcat-5.0.30&#x2F;bin&#x2F;commons-logging-api.jar -Dcatalina.base&#x3D;&#x2F;usr&#x2F;local&#x2F;jakarta-tomcat-5.0.30 -Dcatalina.home&#x3D;&#x2F;usr&#x2F;local&#x2F;jakarta-tomcat-5.0.30 -Djava.io.tmpdir&#x3D;&#x2F;usr&#x2F;local&#x2F;jakarta-tomcat-5.0.30&#x2F;temp org.apache.catalina.startup.Bootstrap start</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<ul>
<li>使用实例4   jstat -compiler pid:显示VM实时编译的数量等信息。</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Compiled Failed Invalid   Time   FailedType FailedMethod</span><br><span class="line"></span><br><span class="line">     768      0       0   0.70            0</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<ul>
<li>使用实例5  jstat –gccapacity :可以显示，VM内存中三代（young,old,perm）对象的使用和占用大小，</li>
</ul>
<p>如：PGCMN显示的是最小perm的内存使用量，PGCMX显示的是perm的内存最大使用量，PGC是当前新生成的perm内存占用量，PC是但前perm内存占用量。其他的可以根据这个类推， OC是old内纯的占用量。</p>
<p>[root@localhost bin]# jstat -gccapacity 25917</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">NGCMN       640.0</span><br><span class="line">NGCMX       4992.0</span><br><span class="line">NGC         832.0</span><br><span class="line">S0C         64.0</span><br><span class="line">S1C         64.0</span><br><span class="line">EC          704.0</span><br><span class="line">OGCMN       1408.0</span><br><span class="line">OGCMX       60544.0</span><br><span class="line">OGC         9504.0</span><br><span class="line">OC          9504.0                  OC是old内纯的占用量</span><br><span class="line">PGCMN       8192.0                  PGCMN显示的是最小perm的内存使用量</span><br><span class="line">PGCMX       65536.0                 PGCMX显示的是perm的内存最大使用量</span><br><span class="line">PGC         12800.0                 PGC是当前新生成的perm内存占用量</span><br><span class="line">PC          12800.0                 PC是但前perm内存占用量</span><br><span class="line">YGC         164</span><br><span class="line">FGC         6</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<ul>
<li>使用实例6 jstat -gcnew pid: new对象的信息</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost bin]# jstat -gcnew 25917</span><br><span class="line"> S0C    S1C    S0U    S1U   TT MTT  DSS      EC       EU     YGC     YGCT</span><br><span class="line"> 64.0   64.0   47.4   0.0   2  15   32.0    704.0    145.7    168    0.254</span><br></pre></td></tr></table></figure>

<ul>
<li>使用实例7 jstat -gcnewcapacity pid: new对象的信息及其占用量</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost bin]# jstat -gcnewcapacity 25917</span><br><span class="line"> NGCMN  NGCMX   NGC   S0CMX  S0C   S1CMX  S1C   ECMX    EC      YGC   FGC</span><br><span class="line">640.0  4992.0  832.0 64.0   448.0 448.0  64.0   4096.0  704.0  168     6</span><br></pre></td></tr></table></figure>


<ul>
<li>使用实例8 jstat -gcold pid: old对象的信息。</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost bin]# jstat -gcold 25917</span><br><span class="line">   PC       PU        OC          OU       YGC    FGC    FGCT     GCT</span><br><span class="line"> 12800.0  12617.6     9504.0      6561.3   169     6    0.335    0.591</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<ul>
<li>使用实例9 jstat -gcoldcapacity pid:old对象的信息及其占用量。</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost bin]# jstat -gcoldcapacity 25917</span><br><span class="line">OGCMN      OGCMX        OGC         OC       YGC   FGC    FGCT     GCT</span><br><span class="line">1408.0     60544.0      9504.0      9504.0   169     6    0.335    0.591</span><br></pre></td></tr></table></figure>


<ul>
<li>使用实例10 jstat -gcpermcapacity pid: perm对象的信息及其占用量。</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost bin]# jstat -gcpermcapacity 25917</span><br><span class="line">PGCMN      PGCMX       PGC         PC      YGC   FGC    FGCT     GCT</span><br><span class="line">8192.0    65536.0    12800.0    12800.0   169     6    0.335    0.591</span><br></pre></td></tr></table></figure>


<ul>
<li>使用实例11 jstat -printcompilation pid:当前VM执行的信息。</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost bin]# jstat -printcompilation -h3  25917 1000 5</span><br><span class="line"></span><br><span class="line">每1000毫秒打印一次，一共打印5次，还可以加上-h3每三行显示一下标题。</span><br><span class="line"></span><br><span class="line">Compiled  Size  Type Method</span><br><span class="line">     788     73    1 java&#x2F;io&#x2F;File &lt;init&gt;</span><br><span class="line">     788     73    1 java&#x2F;io&#x2F;File &lt;init&gt;</span><br><span class="line">     788     73    1 java&#x2F;io&#x2F;File &lt;init&gt;</span><br><span class="line">Compiled  Size  Type Method</span><br><span class="line">     788     73    1 java&#x2F;io&#x2F;File &lt;init&gt;</span><br><span class="line">     788     73    1 java&#x2F;io&#x2F;File &lt;init&gt;</span><br></pre></td></tr></table></figure>


<h1 id="jinfo。查看和修改JVM运行参数"><a href="#jinfo。查看和修改JVM运行参数" class="headerlink" title="jinfo。查看和修改JVM运行参数"></a>jinfo。查看和修改JVM运行参数</h1><p>jinfo（Configuration Info for Java）的作用是实时地查看和调整虚拟机各项参数。使用jps命令的-v参数可以查看虚拟机启动时显式指定的参数列表，但如果想知道未被显式指定的参<br>数的系统默认值，除了去找资料外，就只能使用jinfo的-flag选项进行查询了（如果只限于JDK  1.6或以上版本的话，使用java-XX：+PrintFlagsFinal查看参数默认值也是一个很好的选<br>择），jinfo还可以使用-sysprops选项把虚拟机进程的System.getProperties（）的内容打印出来。JDK  1.6之后，jinfo在Windows和Linux平台都有提供，并且加入了运行期修改参数的能力，可以使用-flag[+|-]name或者-flag  name=value修改一部分运行期可写的虚拟机参数值。<br>JDK 1.6中，jinfo对于Windows平台功能仍然有较大限制，只提供了最基本的-flag选项</p>
<p>执行样例：查询CMSInitiatingOccupancyFraction参数值。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">jinfo -flag CMSInitiatingOccupancyFration 1444</span><br><span class="line">-XX: CMSInitiatingOccupancyFration&#x3D;95</span><br></pre></td></tr></table></figure>
<h1 id="jmap：Java内存映像工具"><a href="#jmap：Java内存映像工具" class="headerlink" title="jmap：Java内存映像工具"></a>jmap：Java内存映像工具</h1><p><a target="_blank" rel="noopener" href="http://www.cnblogs.com/myna/p/7573843.html">引用</a></p>
<p><img src="/images/jvm/jmap%E5%B7%A5%E5%85%B7%E7%9A%84%E4%B8%BB%E8%A6%81%E9%80%89%E9%A1%B9.png" alt="jmap工具的主要选项"></p>
<p>jmap（Memory Map for Java）命令用于生成堆转储快照（一般称为heapdump或dump文件）。如果不使用jmap命令，要想获取Java堆转储快照，还有一些比较“暴力”的手段：譬如<br>在第2章中用过的-XX：+HeapDumpOnOutOfMemoryError参数，可以让虚拟机在OOM异常出现之后自动生成dump文件</p>
<h2 id="命令格式："><a href="#命令格式：" class="headerlink" title="命令格式："></a>命令格式：</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">jmap [ option ] pid</span><br><span class="line">jmap [ option ] executable core</span><br><span class="line">jmap [ option ] [server-id@]remote-hostname-or-IP</span><br></pre></td></tr></table></figure>

<h2 id="参数"><a href="#参数" class="headerlink" title="参数:"></a>参数:</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">option：选项参数，不可同时使用多个选项参数</span><br><span class="line">pid：java进程id，命令ps -ef | grep java获取</span><br><span class="line">executable：产生核心dump的java可执行文件</span><br><span class="line">core：需要打印配置信息的核心文件</span><br><span class="line">remote-hostname-or-ip：远程调试的主机名或ip</span><br><span class="line">server-id：可选的唯一id，如果相同的远程主机上运行了多台调试服务器，用此选项参数标识服务器</span><br></pre></td></tr></table></figure>

<h2 id="options参数"><a href="#options参数" class="headerlink" title="options参数"></a>options参数</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">heap : 显示Java堆详细信息</span><br><span class="line">histo : 显示堆中对象的统计信息</span><br><span class="line">permstat :Java堆内存的永久保存区域的类加载器的统计信息</span><br><span class="line">finalizerinfo : 显示在F-Queue队列等待Finalizer线程执行finalizer方法的对象</span><br><span class="line">dump : 生成堆转储快照</span><br><span class="line">F : 当-dump没有响应时，强制生成dump快照</span><br></pre></td></tr></table></figure>

<h2 id="实例"><a href="#实例" class="headerlink" title="实例"></a>实例</h2><ul>
<li>dump</li>
</ul>
<p>dump堆到文件,format指定输出格式，live指明是活着的对象,file指定文件名</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost jdk1.7.0_79]# jmap -dump:live,format&#x3D;b,file&#x3D;dump.hprof 24971</span><br><span class="line">Dumping heap to &#x2F;usr&#x2F;local&#x2F;java&#x2F;jdk1.7.0_79&#x2F;dump.hprof ...</span><br><span class="line">Heap dump file created</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<ul>
<li>heap</li>
</ul>
<p>打印heap的概要信息，GC使用的算法，heap的配置及使用情况，可以用此来判断内存目前的使用情况以及垃圾回收情况</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost jdk1.7.0_79]# jmap -heap 24971</span><br><span class="line">Attaching to process ID 24971, please wait...</span><br><span class="line">Debugger attached successfully.</span><br><span class="line">Server compiler detected.</span><br><span class="line">JVM version is 24.79-b02</span><br><span class="line"> </span><br><span class="line">using thread-local object allocation.</span><br><span class="line">Parallel GC with 4 thread(s)</span><br><span class="line"> </span><br><span class="line">Heap Configuration:</span><br><span class="line">   MinHeapFreeRatio &#x3D; 0</span><br><span class="line">   MaxHeapFreeRatio &#x3D; 100</span><br><span class="line">   MaxHeapSize      &#x3D; 4146069504 (3954.0MB)</span><br><span class="line">   NewSize          &#x3D; 1310720 (1.25MB)</span><br><span class="line">   MaxNewSize       &#x3D; 17592186044415 MB</span><br><span class="line">   OldSize          &#x3D; 5439488 (5.1875MB)</span><br><span class="line">   NewRatio         &#x3D; 2</span><br><span class="line">   SurvivorRatio    &#x3D; 8</span><br><span class="line">   PermSize         &#x3D; 21757952 (20.75MB)</span><br><span class="line">   MaxPermSize      &#x3D; 85983232 (82.0MB)</span><br><span class="line">   G1HeapRegionSize &#x3D; 0 (0.0MB)</span><br><span class="line"> </span><br><span class="line">Heap Usage:</span><br><span class="line">PS Young Generation</span><br><span class="line">Eden Space:</span><br><span class="line">   capacity &#x3D; 517996544 (494.0MB)</span><br><span class="line">   used     &#x3D; 151567520 (144.54605102539062MB)</span><br><span class="line">   free     &#x3D; 366429024 (349.4539489746094MB)</span><br><span class="line">   29.26033421566612% used</span><br><span class="line">From Space:</span><br><span class="line">   capacity &#x3D; 41943040 (40.0MB)</span><br><span class="line">   used     &#x3D; 0 (0.0MB)</span><br><span class="line">   free     &#x3D; 41943040 (40.0MB)</span><br><span class="line">   0.0% used</span><br><span class="line">To Space:</span><br><span class="line">   capacity &#x3D; 40370176 (38.5MB)</span><br><span class="line">   used     &#x3D; 0 (0.0MB)</span><br><span class="line">   free     &#x3D; 40370176 (38.5MB)</span><br><span class="line">   0.0% used</span><br><span class="line">PS Old Generation</span><br><span class="line">   capacity &#x3D; 115343360 (110.0MB)</span><br><span class="line">   used     &#x3D; 32927184 (31.401809692382812MB)</span><br><span class="line">   free     &#x3D; 82416176 (78.59819030761719MB)</span><br><span class="line">   28.54709972034801% used</span><br><span class="line">PS Perm Generation</span><br><span class="line">   capacity &#x3D; 85983232 (82.0MB)</span><br><span class="line">   used     &#x3D; 54701200 (52.16712951660156MB)</span><br><span class="line">   free     &#x3D; 31282032 (29.832870483398438MB)</span><br><span class="line">   63.6184506300019% used</span><br><span class="line"> </span><br><span class="line">20822 interned Strings occupying 2441752 bytes.</span><br></pre></td></tr></table></figure>
<ul>
<li>finalizerinfo</li>
</ul>
<p>打印等待回收的对象信息</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost jdk1.7.0_79]# jmap -finalizerinfo 24971</span><br><span class="line">Attaching to process ID 24971, please wait...</span><br><span class="line">Debugger attached successfully.</span><br><span class="line">Server compiler detected.</span><br><span class="line">JVM version is 24.79-b02</span><br><span class="line">Number of objects pending for finalization: 0</span><br></pre></td></tr></table></figure>
<p>Number of objects pending for finalization: 0 说明当前F-QUEUE队列中并没有等待Fializer线程执行finalizer方法的对象</p>
<ul>
<li>histo</li>
</ul>
<p>打印堆的对象统计，包括对象数、内存大小等等。jmap -histo:live 这个命令执行，JVM会先触发gc，然后再统计信息</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost jdk1.7.0_79]# jmap -histo:live 24971 | more</span><br><span class="line"> </span><br><span class="line"> num     #instances         #bytes  class name</span><br><span class="line">----------------------------------------------</span><br><span class="line">   1:        100134       14622728  &lt;constMethodKlass&gt;</span><br><span class="line">   2:        100134       12830128  &lt;methodKlass&gt;</span><br><span class="line">   3:         88438       12708392  [C</span><br><span class="line">   4:          8271       10163584  &lt;constantPoolKlass&gt;</span><br><span class="line">   5:         27806        9115784  [B</span><br><span class="line">   6:          8271        6225312  &lt;instanceKlassKlass&gt;</span><br><span class="line">   7:          6830        5632192  &lt;constantPoolCacheKlass&gt;</span><br><span class="line">   8:         86717        2081208  java.lang.String</span><br><span class="line">   9:          2264        1311720  &lt;methodDataKlass&gt;</span><br><span class="line">  10:         10880         870400  java.lang.reflect.Method</span><br><span class="line">  11:          8987         869888  java.lang.Class</span><br><span class="line">  12:         13330         747264  [[I</span><br><span class="line">  13:         11808         733872  [S</span><br><span class="line">  14:         20110         643520  java.util.concurrent.ConcurrentHashMap$HashEntry</span><br><span class="line">  15:         18574         594368  java.util.HashMap$Entry</span><br><span class="line">  16:          3668         504592  [Ljava.util.HashMap$Entry;</span><br><span class="line">  17:         30698         491168  java.lang.Integer</span><br><span class="line">  18:          2247         486864  [I</span><br><span class="line">  19:          7486         479104  java.net.URL</span><br><span class="line">  20:          8032         453616  [Ljava.lang.Object;</span><br><span class="line">  21:         10259         410360  java.util.LinkedHashMap$Entry</span><br><span class="line">  22:           699         380256  &lt;objArrayKlassKlass&gt;</span><br><span class="line">  23:          5782         277536  org.apache.catalina.loader.ResourceEntry</span><br><span class="line">  24:          8327         266464  java.lang.ref.WeakReference</span><br><span class="line">  25:          2374         207928  [Ljava.util.concurrent.ConcurrentHashMap$HashEntry;</span><br><span class="line">  26:          3440         192640  java.util.LinkedHashMap</span><br><span class="line">  27:          4779         191160  java.lang.ref.SoftReference</span><br><span class="line">  28:          3576         171648  java.util.HashMap</span><br><span class="line">  29:         10080         161280  java.lang.Object</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>jmap -histo:live 24971 | grep com.yuhuo 查询类名包含com.yuhuo的信息</p>
<p>jmap -histo:live 24971 | grep com.yuhuo &gt; histo.txt 保存信息到histo.txt文件</p>
<p><img src="/images/jvm/jmap%E8%BE%93%E5%87%BA%E4%B8%ADclass-name%E9%9D%9E%E8%87%AA%E5%AE%9A%E4%B9%89%E7%B1%BB%E7%9A%84%E8%AF%B4%E6%98%8E.png" alt="jmap输出中class-name非自定义类的说明"></p>
<ul>
<li>permstat</li>
</ul>
<p>打印Java堆内存的永久区的类加载器的智能统计信息。对于每个类加载器而言，它的名称、活跃度、地址、父类加载器、它所加载的类的数量和大小都会被打印。此外，包含的字符串数量和大小也会被打印。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost jdk1.7.0_79]# jmap -permstat 24971</span><br><span class="line">Attaching to process ID 24971, please wait...</span><br><span class="line">Debugger attached successfully.</span><br><span class="line">Server compiler detected.</span><br><span class="line">JVM version is 24.79-b02</span><br><span class="line">finding class loader instances ..done.</span><br><span class="line">computing per loader stat ..done.</span><br><span class="line">please wait.. computing liveness....................................................liveness analysis may be inaccurate ...</span><br><span class="line">class_loader    classes bytes   parent_loader   alive?  type</span><br><span class="line"> </span><br><span class="line">&lt;bootstrap&gt;   3034    18149440      null      live    &lt;internal&gt;</span><br><span class="line">0x000000070a88fbb8  1   3048      null      dead    sun&#x2F;reflect&#x2F;DelegatingClassLoader@0x0000000703c50b58</span><br><span class="line">0x000000070a914860  1   3064    0x0000000709035198  dead    sun&#x2F;reflect&#x2F;DelegatingClassLoader@0x0000000703c50b58</span><br><span class="line">0x000000070a9fc320  1   3056    0x0000000709035198  dead    sun&#x2F;reflect&#x2F;DelegatingClassLoader@0x0000000703c50b58</span><br><span class="line">0x000000070adcb4c8  1   3064    0x0000000709035198  dead    sun&#x2F;reflect&#x2F;DelegatingClassLoader@0x0000000703c50b58</span><br><span class="line">0x000000070a913760  1   1888    0x0000000709035198  dead    sun&#x2F;reflect&#x2F;DelegatingClassLoader@0x0000000703c50b58</span><br><span class="line">0x0000000709f3fd40  1   3032      null      dead    sun&#x2F;reflect&#x2F;DelegatingClassLoader@0x0000000703c50b58</span><br><span class="line">0x000000070923ba78  1   3088    0x0000000709035260  dead    sun&#x2F;reflect&#x2F;DelegatingClassLoader@0x0000000703c50b58</span><br><span class="line">0x000000070a88fff8  1   3048      null      dead    sun&#x2F;reflect&#x2F;DelegatingClassLoader@0x0000000703c50b58</span><br><span class="line">0x000000070adcbc58  1   1888    0x0000000709035198  dead    sun&#x2F;reflect&#x2F;DelegatingClassLoader@0x0000000703c50b58</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h1 id="jstack：Java堆栈跟踪工具"><a href="#jstack：Java堆栈跟踪工具" class="headerlink" title="jstack：Java堆栈跟踪工具"></a>jstack：Java堆栈跟踪工具</h1><p>jstack（Stack  Trace  for  Java）命令用于生成虚拟机当前时刻的线程快照（一般称为threaddump或者javacore文件）。线程快照就是当前虚拟机内每一条线程正在执行的方法堆栈<br>的集合，生成线程快照的主要目的是定位线程出现长时间停顿的原因，如线程间死锁、死循环、请求外部资源导致的长时间等待等都是导致线程长时间停顿的常见原因。线程出现停顿<br>的时候通过jstack来查看各个线程的调用堆栈，就可以知道没有响应的线程到底在后台做些什么事情，或者等待着什么资源.</p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/mr__fang/article/details/68496248">使用jstack精确找到异常代码</a><br><a target="_blank" rel="noopener" href="https://www.cnblogs.com/kongzhongqijing/articles/3630264.html">jstack 工具使用</a><br><a target="_blank" rel="noopener" href="https://blog.csdn.net/yaowj2/article/category/855894">性能调优</a></p>
<h1 id="JConsole：Java监视与管理控制台-虚拟机监控工具"><a href="#JConsole：Java监视与管理控制台-虚拟机监控工具" class="headerlink" title="JConsole：Java监视与管理控制台 虚拟机监控工具"></a>JConsole：Java监视与管理控制台 虚拟机监控工具</h1><h2 id="启动"><a href="#启动" class="headerlink" title="启动"></a>启动</h2><p>通过JDK/bin目录下的“jconsole.exe”启动JConsole后，将自动搜索出本机运行的所有虚拟机进程，不需要用户自己再使用jps来查询了</p>
<h1 id="VisualVM-多合一故障处理工具"><a href="#VisualVM-多合一故障处理工具" class="headerlink" title="VisualVM 多合一故障处理工具"></a>VisualVM 多合一故障处理工具</h1>
    </div>

    
    
    

      <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/%E6%80%A7%E8%83%BD%E7%9B%91%E6%8E%A7%E4%B8%8E%E6%95%85%E9%9A%9C%E5%A4%84%E7%90%86%E5%B7%A5%E5%85%B7/" rel="tag"># 性能监控与故障处理工具</a>
          </div>

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/2018-10-24/%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3java%E8%99%9A%E6%8B%9F%E6%9C%BA-%E5%9E%83%E5%9C%BE%E6%94%B6%E9%9B%86%E5%99%A8%E4%B8%8E%E5%86%85%E5%AD%98%E5%88%86%E9%85%8D%E7%AD%96%E7%95%A5/" rel="prev" title="深入理解java虚拟机-垃圾收集器与内存分配策略">
      <i class="fa fa-chevron-left"></i> 深入理解java虚拟机-垃圾收集器与内存分配策略
    </a></div>
      <div class="post-nav-item">
    <a href="/2018-10-30/%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3java%E8%99%9A%E6%8B%9F%E6%9C%BA-java%E5%86%85%E5%AD%98%E6%A8%A1%E5%9E%8B%E4%B8%8E%E7%BA%BF%E7%A8%8B/" rel="next" title="深入理解java虚拟机-java内存模型与线程">
      深入理解java虚拟机-java内存模型与线程 <i class="fa fa-chevron-right"></i>
    </a></div>
    </div>
      </footer>
    
  </article>
  
  
  



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#jps%EF%BC%9A%E8%99%9A%E6%8B%9F%E6%9C%BA%E8%BF%9B%E7%A8%8B%E7%8A%B6%E5%86%B5%E5%B7%A5%E5%85%B7"><span class="nav-number">1.</span> <span class="nav-text">jps：虚拟机进程状况工具</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#JPS-%E5%90%8D%E7%A7%B0"><span class="nav-number">1.1.</span> <span class="nav-text">JPS 名称:</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%91%BD%E4%BB%A4%E7%94%A8%E6%B3%95"><span class="nav-number">1.2.</span> <span class="nav-text">命令用法</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%8A%9F%E8%83%BD%E6%8F%8F%E8%BF%B0"><span class="nav-number">1.3.</span> <span class="nav-text">功能描述</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#jstat-%E7%9B%91%E8%A7%86JVM%E5%86%85%E5%AD%98%E5%B7%A5%E5%85%B7"><span class="nav-number">2.</span> <span class="nav-text">jstat 监视JVM内存工具</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%AF%AD%E6%B3%95%E7%BB%93%E6%9E%84%EF%BC%9A"><span class="nav-number">2.1.</span> <span class="nav-text">语法结构：</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#jinfo%E3%80%82%E6%9F%A5%E7%9C%8B%E5%92%8C%E4%BF%AE%E6%94%B9JVM%E8%BF%90%E8%A1%8C%E5%8F%82%E6%95%B0"><span class="nav-number">3.</span> <span class="nav-text">jinfo。查看和修改JVM运行参数</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#jmap%EF%BC%9AJava%E5%86%85%E5%AD%98%E6%98%A0%E5%83%8F%E5%B7%A5%E5%85%B7"><span class="nav-number">4.</span> <span class="nav-text">jmap：Java内存映像工具</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%91%BD%E4%BB%A4%E6%A0%BC%E5%BC%8F%EF%BC%9A"><span class="nav-number">4.1.</span> <span class="nav-text">命令格式：</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%8F%82%E6%95%B0"><span class="nav-number">4.2.</span> <span class="nav-text">参数:</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#options%E5%8F%82%E6%95%B0"><span class="nav-number">4.3.</span> <span class="nav-text">options参数</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%AE%9E%E4%BE%8B"><span class="nav-number">4.4.</span> <span class="nav-text">实例</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#jstack%EF%BC%9AJava%E5%A0%86%E6%A0%88%E8%B7%9F%E8%B8%AA%E5%B7%A5%E5%85%B7"><span class="nav-number">5.</span> <span class="nav-text">jstack：Java堆栈跟踪工具</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#JConsole%EF%BC%9AJava%E7%9B%91%E8%A7%86%E4%B8%8E%E7%AE%A1%E7%90%86%E6%8E%A7%E5%88%B6%E5%8F%B0-%E8%99%9A%E6%8B%9F%E6%9C%BA%E7%9B%91%E6%8E%A7%E5%B7%A5%E5%85%B7"><span class="nav-number">6.</span> <span class="nav-text">JConsole：Java监视与管理控制台 虚拟机监控工具</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%90%AF%E5%8A%A8"><span class="nav-number">6.1.</span> <span class="nav-text">启动</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#VisualVM-%E5%A4%9A%E5%90%88%E4%B8%80%E6%95%85%E9%9A%9C%E5%A4%84%E7%90%86%E5%B7%A5%E5%85%B7"><span class="nav-number">7.</span> <span class="nav-text">VisualVM 多合一故障处理工具</span></a></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">陈伟杰</p>
  <div class="site-description" itemprop="description">学习，坚持。</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">74</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
        <span class="site-state-item-count">26</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
        <span class="site-state-item-count">68</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2020</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">陈伟杰</span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-chart-area"></i>
    </span>
    <span title="站点总字数">638k</span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-coffee"></i>
    </span>
    <span title="站点阅读时长">9:40</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://muse.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Muse</a> 强力驱动
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/muse.js"></script>


<script src="/js/next-boot.js"></script>




  















  

  

</body>
</html>
