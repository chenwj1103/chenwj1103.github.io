---
title: DDD-领域驱动设计简介
copyright: true
date: 2020-08-14 17:05:52
tags: DDD
categories: DDD

---

#### 服务的演进

> 单机、集中式到分布式微服务架构三个阶段
>
> - 微服务解决的问题
>
>   > 可以解决应用之间的解耦、解决单体应用扩展性、小规模团队的敏捷开发；
>
> - DDD的含义
>
>   > - DDD核心思想是通过领域驱动设计方法`定义领域模型`，从而`确定业务和应用边界`，保证业务模型与代码模型的一致性。
>   >
>   > - DDD不是架构，而是一种架构设计方法论，通过边界划分将复杂业务领域简单化，帮我们设计出清晰的领域和应用边界，可以很容易地实现架构演进。
>   >
>   > - DDD战略设计会建立领域模型，领域模型可以用于指导微服务的设计和拆分。事件风暴是建立领域模型的主要方法，它是一个从发散到收敛的过程。它通常采用用例分析、场景分析和用户旅程分析，尽可能全面不遗漏地分解业务领域，并梳理领域对象之间的关系，这是一个发散的过程。事件风暴过程会产生很多的实体、命令、事件等领域对象，我们将这些领域对象从不同的维度进行聚类，形成如聚合、限界上下文等边界，建立领域模型，这就是一个收敛的过程。
>   >
>   > - 具体的过程
>   >
>   >   > 1. 第一步：在事件风暴中梳理业务过程中的用户操作、事件以及外部依赖关系等，根据这些要素梳理出领域实体等领域对象。
>   >   >
>   >   > 2. 第二步：根据领域实体之间的业务关联性，将业务紧密相关的实体进行组合形成聚合，同时确定聚合中的聚合根、值对象和实体。在这个图里，聚合之间的边界是第一层边界，它们在同一个微服务实例中运行，这个边界是逻辑边界，所以用虚线表示。
>   >   >
>   >   > 3. 第三步：根据业务及语义边界等因素，将一个或者多个聚合划定在一个限界上下文内，形成领域模型。在这个图里，限界上下文之间的边界是第二层边界，这一层边界可能就是未来微服务的边界，不同限界上下文内的领域逻辑被隔离在不同的微服务实例中运行，物理上相互隔离，所以是物理边界，边界之间用实线来表示。
>   >   >
>   >   > 

#### DDD的名字概念

> - 领域： 研究的对象或者事业的范围；
>
> - 子领域：每个子域对应一个更小的问题域或更小的业务范围；（核心思想就是将问题域逐步分解，降低业务理解和系统实现的复杂度）
>
> - 核心域： 关注的核心子域就是核心域；
>
> - 通用域：公共的子领域；
>
> - 支撑域：不是决定性的核心的域，支撑作用的领域；
>
>   公司在IT系统建设过程中，由于预算和资源有限，对不同类型的子域应有不同的关注度和资源投入策略
>
> - 
>
> 领域的核心思想就是将问题域逐级细分，来降低业务理解和系统实现的复杂度。通过领域细分，逐步缩小微服务需要解决的问题域，构建合适的领域模型，而领域模型映射成系统就是微服务了。
>
> 核心域、支撑域和通用域的主要目标是：通过领域划分，区分不同子域在公司内的不同功能属性和重要性，从而公司可对不同子域采取不同的资源投入和建设策略，其关注度也会不一样
>
> DDD分层架构包括用户接入层、应用层、领域层和基础层四层。

#### 限界上下文：定义领域边界的利器

> - 在事件风暴的过程中，领域专家会和设计、开发人员一起建立领域模型，在领域建模的过程中会形成通用的业务术语和用户故事。事件风暴也是一个项目团队统一语言的过程。
> - 通过用户故事分析会形成一个个的领域对象，这些领域对象对应领域模型的业务对象，每一个业务对象和领域对象都有通用的名词术语，并且一一映射
> - 微服务代码模型来源于领域模型，每个代码模型的代码对象跟领域对象一一对应。
>
> 设计过程中我们可以用一些表格，来记录事件风暴和微服务设计过程中产生的领域对象及其属
>
> ![业务模型和代码模型的关系](/images/DDD/业务模型和代码模型的关系.png)
>
> 我认为限界上下文的定义就是：用来封装通用语言和领域对象，提供上下文环境，保证在领域之内的一些术语、业务相关对象等（通用语言）有一个确切的含义，没有二义性。这个边界定义了模型的适用范围，使团队所有成员能够明确地知道什么应该在模型中实现，什么不应该在模型中实现。
>
> 正如电商领域的商品一样，商品在不同的阶段有不同的术语，在销售阶段是商品，而在运输阶段则变成了货物。同样的一个东西，由于业务领域的不同，赋予了这些术语不同的涵义和职责边界，这个边界就可能会成为未来微服务设计的边界。看到这，我想你应该非常清楚了，领域边界就是通过限界上下文来定义的。





















