<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.0.2">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"www.chenwj.cn","root":"/","scheme":"Gemini","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"path":"search.xml"};
  </script>

  <meta name="description" content="查询机制当使用如下命令连接上数据库后，会提示你的connecttion id 是多少。 123456789101112131415zhuningning@ubuntu:~$ mysql -u lrngsql -p Enter password: Welcome to the MySQL monitor.  Commands end with ; or \g.Your MySQL connectio">
<meta property="og:type" content="article">
<meta property="og:title" content="《SQL基础》SQL学习指南学习笔记二 查询入门 过滤 多表查询">
<meta property="og:url" content="http://www.chenwj.cn/2017-11-10/SQL%E5%AD%A6%E4%B9%A0%E6%8C%87%E5%8D%97%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E4%BA%8C%20%E6%9F%A5%E8%AF%A2%E5%85%A5%E9%97%A8%20%E8%BF%87%E6%BB%A4%20%E5%A4%9A%E8%A1%A8%E6%9F%A5%E8%AF%A2/index.html">
<meta property="og:site_name" content="茄子的博客">
<meta property="og:description" content="查询机制当使用如下命令连接上数据库后，会提示你的connecttion id 是多少。 123456789101112131415zhuningning@ubuntu:~$ mysql -u lrngsql -p Enter password: Welcome to the MySQL monitor.  Commands end with ; or \g.Your MySQL connectio">
<meta property="og:locale" content="zh_CN">
<meta property="article:published_time" content="2017-11-10T15:22:30.000Z">
<meta property="article:modified_time" content="2020-08-20T17:03:09.817Z">
<meta property="article:author" content="陈伟杰">
<meta property="article:tag" content="sql学习指南">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="http://www.chenwj.cn/2017-11-10/SQL%E5%AD%A6%E4%B9%A0%E6%8C%87%E5%8D%97%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E4%BA%8C%20%E6%9F%A5%E8%AF%A2%E5%85%A5%E9%97%A8%20%E8%BF%87%E6%BB%A4%20%E5%A4%9A%E8%A1%A8%E6%9F%A5%E8%AF%A2/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'zh-CN'
  };
</script>

  <title>《SQL基础》SQL学习指南学习笔记二 查询入门 过滤 多表查询 | 茄子的博客</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

<link rel="alternate" href="/atom.xml" title="茄子的博客" type="application/atom+xml">
</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">茄子的博客</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description">技术博客</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="home fa-fw"></i>首页</a>

  </li>
        <li class="menu-item menu-item-about">

    <a href="/about/" rel="section"><i class="user fa-fw"></i>关于</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="tags fa-fw"></i>标签<span class="badge">68</span></a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="th fa-fw"></i>分类<span class="badge">26</span></a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="archive fa-fw"></i>归档<span class="badge">75</span></a>

  </li>
        <li class="menu-item menu-item-sitemap">

    <a href="/sitemap.xml" rel="section"><i class="sitemap fa-fw"></i>站点地图</a>

  </li>
        <li class="menu-item menu-item-commonweal">

    <a href="/404/" rel="section"><i class="heartbeat fa-fw"></i>公益 404</a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off"
           placeholder="搜索..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div id="search-result">
  <div id="no-result">
    <i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>
  </div>
</div>

    </div>
  </div>

</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content post posts-expand">
            

    
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://www.chenwj.cn/2017-11-10/SQL%E5%AD%A6%E4%B9%A0%E6%8C%87%E5%8D%97%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E4%BA%8C%20%E6%9F%A5%E8%AF%A2%E5%85%A5%E9%97%A8%20%E8%BF%87%E6%BB%A4%20%E5%A4%9A%E8%A1%A8%E6%9F%A5%E8%AF%A2/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/favicon.ico">
      <meta itemprop="name" content="陈伟杰">
      <meta itemprop="description" content="学习，坚持。">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="茄子的博客">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          《SQL基础》SQL学习指南学习笔记二 查询入门 过滤 多表查询
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2017-11-10 23:22:30" itemprop="dateCreated datePublished" datetime="2017-11-10T23:22:30+08:00">2017-11-10</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2020-08-21 01:03:09" itemprop="dateModified" datetime="2020-08-21T01:03:09+08:00">2020-08-21</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/sql/" itemprop="url" rel="index"><span itemprop="name">sql</span></a>
                </span>
            </span>

          
            <span class="post-meta-item" title="阅读次数" id="busuanzi_container_page_pv" style="display: none;">
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              <span class="post-meta-item-text">阅读次数：</span>
              <span id="busuanzi_value_page_pv"></span>
            </span><br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>25k</span>
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>23 分钟</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <h2 id="查询机制"><a href="#查询机制" class="headerlink" title="查询机制"></a>查询机制</h2><p>当使用如下命令连接上数据库后，会提示你的connecttion id 是多少。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">zhuningning@ubuntu:~$ mysql -u lrngsql -p </span><br><span class="line">Enter password: </span><br><span class="line">Welcome to the MySQL monitor.  Commands end with ; or \g.</span><br><span class="line">Your MySQL connection id is 4</span><br><span class="line">Server version: 5.7.20 MySQL Community Server (GPL)</span><br><span class="line"></span><br><span class="line">Copyright (c) 2000, 2017, Oracle and&#x2F;or its affiliates. All rights reserved.</span><br><span class="line"></span><br><span class="line">Oracle is a registered trademark of Oracle Corporation and&#x2F;or its</span><br><span class="line">affiliates. Other names may be trademarks of their respective</span><br><span class="line">owners.</span><br><span class="line"></span><br><span class="line">Type &#39;help;&#39; or &#39;\h&#39; for help. Type &#39;\c&#39; to clear the current input statement.</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>在执行你的语句之前，要进行以下验证</p>
<ul>
<li>用户是否有权限执行以下语句；</li>
<li>用户是否有权限访问目标数据；</li>
<li>语句的语法是否正确；</li>
</ul>
<p>通过了以上测试，语句会传递给查询优化器（负责查询到最有效率的执行方式），之后执行查询。</p>
<h2 id="查询语句"><a href="#查询语句" class="headerlink" title="查询语句"></a>查询语句</h2><p>查询语句由以下子句组成</p>
<ul>
<li>select： 确定结果集中应该包含哪些列。</li>
<li>from：指明所要提取数据的表，以及这些表时如何连接的。</li>
<li>where：过滤不需要的表。</li>
<li>group by ：用于对具有相同列值的行进行分组。</li>
<li>having：过滤不需要的组。</li>
<li>order by：按一个或者多个列，对最后的结果集中的行进行排序。</li>
</ul>
<h3 id="select子句"><a href="#select子句" class="headerlink" title="select子句"></a>select子句</h3><p>该子句用于在所有的可能的列中，选择查询结果集包包含哪些列。<br>在该子句中可以包括字符串、表达式、内建函数等。</p>
<p>例子如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select emp_id,&#39;active&#39;,emp_id*3.14159,upper(lname) from employee;</span><br><span class="line">+--------+--------+----------------+--------------+</span><br><span class="line">| emp_id | active | emp_id*3.14159 | upper(lname) |</span><br><span class="line">+--------+--------+----------------+--------------+</span><br><span class="line">|      1 | active |        3.14159 | SMITH        |</span><br><span class="line">|      2 | active |        6.28318 | BARKER       |</span><br><span class="line">|      3 | active |        9.42477 | TYLER        |</span><br><span class="line">|      4 | active |       12.56636 | HAWTHORNE    |</span><br><span class="line">|      5 | active |       15.70795 | GOODING      |</span><br><span class="line">|      6 | active |       18.84954 | FLEMING      |</span><br><span class="line">|      7 | active |       21.99113 | TUCKER       |</span><br><span class="line">|      8 | active |       25.13272 | PARKER       |</span><br><span class="line">|      9 | active |       28.27431 | GROSSMAN     |</span><br><span class="line">|     10 | active |       31.41590 | ROBERTS      |</span><br><span class="line">|     11 | active |       34.55749 | ZIEGLER      |</span><br><span class="line">|     12 | active |       37.69908 | JAMESON      |</span><br><span class="line">|     13 | active |       40.84067 | BLAKE        |</span><br><span class="line">|     14 | active |       43.98226 | MASON        |</span><br><span class="line">|     15 | active |       47.12385 | PORTMAN      |</span><br><span class="line">|     16 | active |       50.26544 | MARKHAM      |</span><br><span class="line">|     17 | active |       53.40703 | FOWLER       |</span><br><span class="line">|     18 | active |       56.54862 | TULMAN       |</span><br><span class="line">+--------+--------+----------------+--------------+</span><br><span class="line">18 rows in set (0.00 sec)</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>如果只是执行内置函数，就不需要加后面的子句。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select version(),user(),database();</span><br><span class="line">+-----------+----------+------------+</span><br><span class="line">| version() | user()   | database() |</span><br><span class="line">+-----------+----------+------------+</span><br><span class="line">| 5.7.20    | lrngsql@ | bank       |</span><br><span class="line">+-----------+----------+------------+</span><br><span class="line">1 row in set (0.00 sec)</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h4 id="列的别名"><a href="#列的别名" class="headerlink" title="列的别名"></a>列的别名</h4><ul>
<li>列的别名,可以在查询的字段后使用 as 或者直接在列后添加别名。为了增加可读性，建议添加as关键字。</li>
</ul>
<p>例子如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select emp_id,&#39;active&#39; as active,emp_id*3.14159 as empid_x_pi,upper(lname) as last_name_upper from employee;</span><br><span class="line">+--------+--------+------------+-----------------+</span><br><span class="line">| emp_id | active | empid_x_pi | last_name_upper |</span><br><span class="line">+--------+--------+------------+-----------------+</span><br><span class="line">|      1 | active |    3.14159 | SMITH           |</span><br><span class="line">|      2 | active |    6.28318 | BARKER          |</span><br><span class="line">|      3 | active |    9.42477 | TYLER           |</span><br><span class="line">|      4 | active |   12.56636 | HAWTHORNE       |</span><br><span class="line">|      5 | active |   15.70795 | GOODING         |</span><br><span class="line">|      6 | active |   18.84954 | FLEMING         |</span><br><span class="line">|      7 | active |   21.99113 | TUCKER          |</span><br><span class="line">|      8 | active |   25.13272 | PARKER          |</span><br><span class="line">|      9 | active |   28.27431 | GROSSMAN        |</span><br><span class="line">|     10 | active |   31.41590 | ROBERTS         |</span><br><span class="line">|     11 | active |   34.55749 | ZIEGLER         |</span><br><span class="line">|     12 | active |   37.69908 | JAMESON         |</span><br><span class="line">|     13 | active |   40.84067 | BLAKE           |</span><br><span class="line">|     14 | active |   43.98226 | MASON           |</span><br><span class="line">|     15 | active |   47.12385 | PORTMAN         |</span><br><span class="line">|     16 | active |   50.26544 | MARKHAM         |</span><br><span class="line">|     17 | active |   53.40703 | FOWLER          |</span><br><span class="line">|     18 | active |   56.54862 | TULMAN          |</span><br><span class="line">+--------+--------+------------+-----------------+</span><br><span class="line">18 rows in set (0.00 sec)</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h4 id="去除重复行"><a href="#去除重复行" class="headerlink" title="去除重复行"></a>去除重复行</h4><p>去除重复行，可以使用distinct关键字。注意 ** 产生无重复结果集需要首先对数据进行排序 ,这对于大的结果是相当耗时的。因此当有需求时再使用DISTINCT关键字，否则没必要。 **</p>
<h3 id="from-子句"><a href="#from-子句" class="headerlink" title="from 子句"></a>from 子句</h3><p>from子句定义了查询中所使用的表，以及连接这些表的方式。</p>
<p>表的概念:</p>
<ul>
<li>永久表（create table语句创建的表）;</li>
</ul>
<p>从表中查询数据时，可以在表名后加 as 别名 为表添加一个实例的别名。</p>
<ul>
<li>临时表（子查询所返回的表）；</li>
</ul>
<p>子查询可以出现在select语句中的各个部分，并且别包含在圆括号中。</p>
<p>例子：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">mysql&gt; select e.emp_id,e.fname,e.lname from (select emp_id,fname,lname,start_date,title from employee) e;</span><br><span class="line">+--------+----------+-----------+</span><br><span class="line">| emp_id | fname    | lname     |</span><br><span class="line">+--------+----------+-----------+</span><br><span class="line">|      1 | Michael  | Smith     |</span><br><span class="line">|      2 | Susan    | Barker    |</span><br><span class="line">|      3 | Robert   | Tyler     |</span><br><span class="line">|      4 | Susan    | Hawthorne |</span><br><span class="line">|      5 | John     | Gooding   |</span><br><span class="line">|      6 | Helen    | Fleming   |</span><br><span class="line">|      7 | Chris    | Tucker    |</span><br><span class="line">|      8 | Sarah    | Parker    |</span><br><span class="line">|      9 | Jane     | Grossman  |</span><br><span class="line">|     10 | Paula    | Roberts   |</span><br><span class="line">|     11 | Thomas   | Ziegler   |</span><br><span class="line">|     12 | Samantha | Jameson   |</span><br><span class="line">|     13 | John     | Blake     |</span><br><span class="line">|     14 | Cindy    | Mason     |</span><br><span class="line">|     15 | Frank    | Portman   |</span><br><span class="line">|     16 | Theresa  | Markham   |</span><br><span class="line">|     17 | Beth     | Fowler    |</span><br><span class="line">|     18 | Rick     | Tulman    |</span><br><span class="line">+--------+----------+-----------+</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>这是一个不是使用的例子，但可以表示临时表的用处。</p>
<ul>
<li>虚拟表 （使用create view子句所创建的视图）</li>
</ul>
<p>视图时存储在数据字典中的查询。它的行为表现的像一个表，但实际上并不是一个表。当查询视图时，该查询会被绑定到视图定义上。</p>
<p>视图的作用：</p>
<ul>
<li>用户隐藏列，简化数据库设计。</li>
</ul>
<p>如下例子：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F; 创建视图</span><br><span class="line">mysql&gt; create view employee_vw  as select emp_id,fname,lname,year(start_date) start_year from employee;</span><br><span class="line">Query OK, 0 rows affected (0.05 sec)</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F;查询视图</span><br><span class="line">mysql&gt; SELECT * from employee_vw;</span><br><span class="line">+--------+----------+-----------+------------+</span><br><span class="line">| emp_id | fname    | lname     | start_year |</span><br><span class="line">+--------+----------+-----------+------------+</span><br><span class="line">|      1 | Michael  | Smith     |       2001 |</span><br><span class="line">|      2 | Susan    | Barker    |       2002 |</span><br><span class="line">|      3 | Robert   | Tyler     |       2000 |</span><br><span class="line">|      4 | Susan    | Hawthorne |       2002 |</span><br><span class="line">|      5 | John     | Gooding   |       2003 |</span><br><span class="line">|      6 | Helen    | Fleming   |       2004 |</span><br><span class="line">|      7 | Chris    | Tucker    |       2004 |</span><br><span class="line">|      8 | Sarah    | Parker    |       2002 |</span><br><span class="line">|      9 | Jane     | Grossman  |       2002 |</span><br><span class="line">|     10 | Paula    | Roberts   |       2002 |</span><br><span class="line">|     11 | Thomas   | Ziegler   |       2000 |</span><br><span class="line">|     12 | Samantha | Jameson   |       2003 |</span><br><span class="line">|     13 | John     | Blake     |       2000 |</span><br><span class="line">|     14 | Cindy    | Mason     |       2002 |</span><br><span class="line">|     15 | Frank    | Portman   |       2003 |</span><br><span class="line">|     16 | Theresa  | Markham   |       2001 |</span><br><span class="line">|     17 | Beth     | Fowler    |       2002 |</span><br><span class="line">|     18 | Rick     | Tulman    |       2002 |</span><br><span class="line">+--------+----------+-----------+------------+</span><br><span class="line">18 rows in set (0.01 sec)</span><br><span class="line"></span><br></pre></td></tr></table></figure>


<h3 id="where子句"><a href="#where子句" class="headerlink" title="where子句"></a>where子句</h3><p>在结果集中过滤掉不需要的行。</p>
<p>当where子句中有多个条件时，可以使用AND或者OR进行连接。当混合使用不同的操作符时，开发者应当使用圆括号来分割成组的条件。</p>
<p>例子：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select emp_id,fname,lname,start_date,title from employee where (title &#x3D;&#39;Head Teller&#39; AND start_date &gt;&#39;2003-01-01&#39;)  or (title&#x3D;&#39;Teller&#39; AND start_date &gt;&#39;2004-01-01&#39;);</span><br><span class="line">+--------+-------+---------+------------+-------------+</span><br><span class="line">| emp_id | fname | lname   | start_date | title       |</span><br><span class="line">+--------+-------+---------+------------+-------------+</span><br><span class="line">|      6 | Helen | Fleming | 2004-03-17 | Head Teller |</span><br><span class="line">|      7 | Chris | Tucker  | 2004-09-15 | Teller      |</span><br><span class="line">+--------+-------+---------+------------+-------------+</span><br><span class="line">2 rows in set (0.00 sec)</span><br><span class="line"></span><br></pre></td></tr></table></figure>


<h3 id="group-by子句和having子句"><a href="#group-by子句和having子句" class="headerlink" title="group by子句和having子句"></a>group by子句和having子句</h3><p>此例子是表示在服务器返回结果集之前对数据再一次进行提炼。</p>
<p>**where group by  和having的区别 ** </p>
<p><a target="_blank" rel="noopener" href="http://blog.csdn.net/Shine_rise/article/details/54934242">参考</a>  该文章中最后两行是错误的，详细看下文中的执行顺序。</p>
<p>where：数据库中常用的是where关键字，用于在初始表中筛选查询。它是一个约束声明，用于约束数据，在返回结果集之前起作用。</p>
<p>group by：对select查询出来的结果集按照某个字段或者表达式进行分组（这里不能说明select语句时在group by中执行，<br>意思时说group by的字段必须在select的字段中存在。），获得一组组的集合，然后从每组中取出一个指定字段或者<br>表达式的值。 </p>
<p>在说group by的时候，我们还需要了解聚合函数，聚合函数是SQL语言中一种特殊的函数。例如：</p>
<ul>
<li>count(*)：获取数量</li>
<li>sum()：求和(这里要注意求和是忽略null值的，null与其他数值相加结果为null，所以可以通过ifnull(xxx,0)将null的值赋为0）</li>
<li>avg()：求平均数</li>
<li>max()：求最大值</li>
<li>min()：求最小值</li>
</ul>
<p>这些函数和其它函数的根本区别就是它们一般作用在多条记录上。<br>我们需要注意的是：在使用group by的SQL语句中，select中返回的字段，必须满足以下两个条件之一：(不太确定，欢迎讨论)</p>
<ul>
<li>包含在group by语句的后面，作为分组的依据；</li>
<li>这些字段包含在聚合函数中。</li>
</ul>
<p>having：用于对where和group by查询出来的分组经行过滤，查出满足条件的分组结果。它是一个过滤声明，是在查询返回结果集以后对查询结果进行的过滤操作。 </p>
<p><strong>所以having的使用需要注意以下几点：</strong></p>
<ul>
<li>having只能用于group by（分组统计语句中）分组包括显示分组group by 和隐式分组 如name =’张三’；</li>
<li>where 是用于在初始表中筛选查询，having用于在where和group by 结果分组中查询</li>
<li>having 子句中的每一个元素也必须出现在select列表中</li>
<li>having语句可以使用聚合函数，而where不使用。</li>
<li>where子句中不能使用聚合函数</li>
<li>当在包含group by子句的查询中增加过滤条件时，需要考虑过滤是针对原始数据（应该放在where子句中），还是针对分组后的数据（放到having子句中）</li>
</ul>
<p>回到开头的那个问题：当一个语句中同时含有where、group by 、having及聚集函数时，执行顺序如下：</p>
<p>执行where子句查找符合条件的数据；<br>使用group by 子句对数据进行分组；对group by 子句形成的组运行聚集函数计算每一组的值；<br>最后用having 子句去掉不符合条件的组，having处理的是分组数据，而不是原始数据。</p>
<p>需要注意的是:</p>
<ul>
<li>having 子句中的每一个元素也必须出现在select列表中。有些数据库例外，如oracle.</li>
<li>having子句和where子句都可以用来设定限制条件以使查询结果满足一定的条件限制。</li>
<li>having子句限制的是组，而不是行。where子句中不能使用聚集函数，而having子句中可以。</li>
</ul>
<p>在group by子句中使用with rollup修改后的查询</p>
<p>例子：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">mysql&gt; select product_cd,open_branch_id,sum(avail_balance) tot_balance</span><br><span class="line">    -&gt; from account group by product_cd,open_branch_id with rollup;</span><br><span class="line">+------------+----------------+-------------+</span><br><span class="line">| product_cd | open_branch_id | tot_balance |</span><br><span class="line">+------------+----------------+-------------+</span><br><span class="line">| BUS        |              2 |     9345.55 |</span><br><span class="line">| BUS        |              4 |        0.00 |</span><br><span class="line">| BUS        |           NULL |     9345.55 |</span><br><span class="line">| CD         |              1 |    11500.00 |</span><br><span class="line">| CD         |              2 |     8000.00 |</span><br><span class="line">| CD         |           NULL |    19500.00 |</span><br><span class="line">| CHK        |              1 |      782.16 |</span><br><span class="line">| CHK        |              2 |     3315.77 |</span><br><span class="line">| CHK        |              3 |     1057.75 |</span><br><span class="line">| CHK        |              4 |    67852.33 |</span><br><span class="line">| CHK        |           NULL |    73008.01 |</span><br><span class="line">| MM         |              1 |    14832.64 |</span><br><span class="line">| MM         |              3 |     2212.50 |</span><br><span class="line">| MM         |           NULL |    17045.14 |</span><br><span class="line">| SAV        |              1 |      767.77 |</span><br><span class="line">| SAV        |              2 |      700.00 |</span><br><span class="line">| SAV        |              4 |      387.99 |</span><br><span class="line">| SAV        |           NULL |     1855.76 |</span><br><span class="line">| SBL        |              3 |    50000.00 |</span><br><span class="line">| SBL        |           NULL |    50000.00 |</span><br><span class="line">| NULL       |           NULL |   170754.46 |</span><br><span class="line">+------------+----------------+-------------+</span><br><span class="line">21 rows in set (0.01 sec)</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>对应着open_branch_id 为null的行即为对所有product_cd相同的行的合计。</p>
<p>**多个子句的执行顺序 **</p>
<p>SQL查询处理的步骤序号：</p>
<ol>
<li>FROM <left_table>  </li>
<li><join_type> JOIN <right_table> </li>
<li>ON <join_condition> </li>
<li>WHERE <where_condition> </li>
<li>GROUP BY <group_by_list>  （这个过程需要排序）</li>
<li>聚合函数 {CUBE | ROLLUP} </li>
<li>HAVING <having_condition> </li>
<li>SELECT  </li>
<li>DISTINCT   （这个过程需要排序）</li>
<li>ORDER BY <order_by_list></li>
<li>limit  <select_list></li>
</ol>
<p>以上每个步骤都会产生一个虚拟表，该虚拟表被用作下一个步骤的输入。这些虚拟表对调用者(客户端应用程序或者外部查询)不可用。只有最后一步生成的表才会会给调用者。如果没有在查询中指定某一个子句，将跳过相应的步骤。</p>
<p>逻辑查询处理阶段简介：</p>
<ol>
<li>FROM：对FROM子句中的前两个表执行笛卡尔积(交叉联接)，生成虚拟表VT1。</li>
<li>ON：对VT1应用ON筛选器，只有那些使为真才被插入到TV2。</li>
<li>OUTER (JOIN):如果指定了OUTER JOIN(相对于CROSS JOIN或INNER JOIN)，保留表中未找到匹配的行将作为外部行添加到VT2，生成TV3。如果FROM子句包含两个以上的表，则对上一个联接生成的结果表和下一个表重复执行步骤1到步骤3，直到处理完所有的表位置。</li>
<li>WHERE：对TV3应用WHERE筛选器，只有使为true的行才插入TV4。</li>
<li>GROUP BY：按GROUP BY子句中的列列表对TV4中的行进行分组，生成TV5。</li>
<li>聚合函数：把超组插入VT5，生成VT6。</li>
<li>HAVING：对VT6应用HAVING筛选器，只有使为true的组插入到VT7。</li>
<li>SELECT：处理SELECT列表，产生VT8。</li>
<li>DISTINCT：将重复的行从VT8中删除，产品VT9。</li>
<li>ORDER BY：将VT9中的行按ORDER BY子句中的列列表顺序，生成一个游标(VC10)。</li>
<li>limit：从VC10的开始处选择指定数量或比例的行，生成表TV11，并返回给调用者。</li>
</ol>
<h3 id="order子句"><a href="#order子句" class="headerlink" title="order子句"></a>order子句</h3><p>用于对结果集中的原始列数据或者根据列数据计算的表达式结果进行排序。</p>
<p>默认的 order by 字段A，对字段A进行升序排列（ASC），如果需要对数据将序排列，需要在字段后加DESC关键字。</p>
<p>如下例子：需要首先根据open_emp_id升序排列，然后根据product_cd进行降序排列。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; SELECT open_emp_id,product_cd FROM account ORDER BY open_emp_id,product_cd DESC;</span><br><span class="line">+-------------+------------+</span><br><span class="line">| open_emp_id | product_cd |</span><br><span class="line">+-------------+------------+</span><br><span class="line">|           1 | SAV        |</span><br><span class="line">|           1 | MM         |</span><br><span class="line">|           1 | MM         |</span><br><span class="line">|           1 | CHK        |</span><br><span class="line">|           1 | CHK        |</span><br><span class="line">|           1 | CHK        |</span><br><span class="line">|           1 | CD         |</span><br><span class="line">|           1 | CD         |</span><br><span class="line">|          10 | SAV        |</span><br><span class="line">|          10 | SAV        |</span><br><span class="line">|          10 | CHK        |</span><br><span class="line">|          10 | CHK        |</span><br><span class="line">|          10 | CD         |</span><br><span class="line">|          10 | CD         |</span><br><span class="line">|          10 | BUS        |</span><br><span class="line">|          13 | SBL        |</span><br><span class="line">|          13 | MM         |</span><br><span class="line">|          13 | CHK        |</span><br><span class="line">|          16 | SAV        |</span><br><span class="line">|          16 | CHK        |</span><br><span class="line">|          16 | CHK        |</span><br><span class="line">|          16 | CHK        |</span><br><span class="line">|          16 | CHK        |</span><br><span class="line">|          16 | BUS        |</span><br><span class="line">+-------------+------------+</span><br><span class="line">24 rows in set (0.00 sec)</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="过滤"><a href="#过滤" class="headerlink" title="过滤"></a>过滤</h2><p>过滤查找条件可以分为 相等查找、不等条件、范围条件、成员条件和匹配条件。</p>
<p>其中范围查找中的 between and 查找需要注意：</p>
<ol>
<li>必须先制定范围的下限（在between后面），然后制定 范围的上限（在end后面），否则会查出空集合。</li>
<li>beeween and操作符是，包含边界值的。</li>
</ol>
<p>成员条件可以使用or关键字或者 in、not in关键字。</p>
<p>匹配条件是指使用通配符查找。</p>
<ol>
<li>正好匹配一个字符。使用 ‘_’</li>
<li>匹配任意数目的字符(包括0个)，使用’%’</li>
</ol>
<p>LIKE 操作符用于在 WHERE 子句中搜索列中的指定模式。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">SELECT column_name(s)</span><br><span class="line">FROM table_name</span><br><span class="line">WHERE column_name LIKE pattern;</span><br><span class="line">例如：</span><br><span class="line">    like  ‘K% ’  表示以K开头的字符串。</span><br><span class="line">    like  &#39;%D&#39;  表示以D结尾的字符串。</span><br><span class="line">    like ‘_oogle’  表示以任一一个字符开始的，然后时oogle的字符串。如google</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="NULL关键字"><a href="#NULL关键字" class="headerlink" title="NULL关键字"></a>NULL关键字</h2><p>表示值的缺失：</p>
<ol>
<li>没有合适的值，比如ATM机上的自助交易并不需要employee ID列。</li>
<li>值未确定 比如在客户创建行的时候不知道他的id</li>
<li>值未定义 比如为某个还未添加到数据库的产品创建账户。</li>
</ol>
<p>注意：</p>
<ol>
<li>表达式可以为null，但是不能等于null </li>
<li>两个NUll值彼此不能判断为相等。</li>
</ol>
<p><strong>使用NULL时应注意：</strong></p>
<ul>
<li>普通的值一般都可能进行运算符操作,例如:ID列为int,所以可以这样:ID=ID+1等,但如果一列的值为null,<br>null+1=null,就是说null与任何运算符运算后都为null,这就是大家说的黑洞,会吃掉所有的东西.</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">update testNull</span><br><span class="line">set b&#x3D;b+1</span><br><span class="line">where b is null</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>结论:查询后发现b的值没有变化,仍然为null.</p>
<ul>
<li>普通的值可以进行”=”操作,例如条件中一般都会这样出现:sUserName=’张三’,如果sUserName的值为null,<br>要想找出所有名字为null的记录时,不能这样用:sUserName=null,因为null不是一个具体的值,任何值与它比较<br>时都会返回false.此时可借用is null 或者是is not null.</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">select * from testNull where a&#x3D;null --返回空结果集</span><br><span class="line">select * from testNull where b is null --返回结果集 2 2 NULL</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>结论:说明null是不能用”=”来比较,可用is null来替换</p>
<ul>
<li>在用统计函数count时会不同,例如count(ID):统计记录数.当统计的记录中的包含有null值时,它会忽略null值.</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">select count(*),count(b) from testNull 它的返回值为2 1</span><br><span class="line">select count(*),count(isnull(b,&#39;&#39;)) from testNull 它的返回值为2 2</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>结论:对于列包含null 时,统计行数是可用count(*),或者是先把null值转换成对应的值再统计,例如count(isnull(b,’’));</p>
<ul>
<li>对于in 的影响不同.</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">select * from testNull</span><br><span class="line">where b in(null) --没有任何记录</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>结论:in在查询时会忽略null的记录,查询的时候可用is not null来查询.</p>
<ul>
<li>排序时顺序有不同:当使用ORDER BY时，首先呈现NULL值。如果你用DESC以降序排序，NULL值最后显示。</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select emp_id ,fname,lname,superior_emp_id from employee  order by superior_emp_id;</span><br><span class="line">+--------+----------+-----------+-----------------+</span><br><span class="line">| emp_id | fname    | lname     | superior_emp_id |</span><br><span class="line">+--------+----------+-----------+-----------------+</span><br><span class="line">|      2 | Susan    | Barker    |            NULL |</span><br><span class="line">|      3 | Robert   | Tyler     |            NULL |</span><br><span class="line">|      1 | Michael  | Smith     |            NULL |</span><br><span class="line">|      4 | Susan    | Hawthorne |               3 |</span><br><span class="line">|     10 | Paula    | Roberts   |               4 |</span><br><span class="line">|     16 | Theresa  | Markham   |               4 |</span><br><span class="line">|     13 | John     | Blake     |               4 |</span><br><span class="line">|      6 | Helen    | Fleming   |               4 |</span><br><span class="line">|      5 | John     | Gooding   |               4 |</span><br><span class="line">|      8 | Sarah    | Parker    |               6 |</span><br><span class="line">|      9 | Jane     | Grossman  |               6 |</span><br><span class="line">|      7 | Chris    | Tucker    |               6 |</span><br><span class="line">|     11 | Thomas   | Ziegler   |              10 |</span><br><span class="line">|     12 | Samantha | Jameson   |              10 |</span><br><span class="line">|     14 | Cindy    | Mason     |              13 |</span><br><span class="line">|     15 | Frank    | Portman   |              13 |</span><br><span class="line">|     17 | Beth     | Fowler    |              16 |</span><br><span class="line">|     18 | Rick     | Tulman    |              16 |</span><br><span class="line">+--------+----------+-----------+-----------------+</span><br><span class="line">18 rows in set (0.00 sec)</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<ul>
<li><p>永远不会有什么数据等于NULL。1不等于NULL，2也一样。但NULL也不等于NULL。所以我们只能比较它“是”或“不是”。</p>
</li>
<li><p>count(*)表示统计行数，而count(某一个字段)表示对该值的内容统计，如果它的值为null，则该列不计数。</p>
</li>
</ul>
<h2 id="case-when-else-end-条件逻辑语句"><a href="#case-when-else-end-条件逻辑语句" class="headerlink" title="case when else end 条件逻辑语句"></a>case when else end 条件逻辑语句</h2><p>简单的说，条件逻辑语句时程序执行时从多个路径中选择其一的能。</p>
<h3 id="case表达式返回字符串的例子"><a href="#case表达式返回字符串的例子" class="headerlink" title="case表达式返回字符串的例子"></a>case表达式返回字符串的例子</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">SELECT </span><br><span class="line">    c.cust_id,</span><br><span class="line">    c.fed_id,</span><br><span class="line">    CASE</span><br><span class="line">        WHEN c.cust_type_cd &#x3D; &#39;I&#39; THEN CONCAT(i.fname, &#39; &#39;, i.lname)</span><br><span class="line">        WHEN c.cust_type_cd &#x3D; &#39;B&#39; THEN b.name</span><br><span class="line">        ELSE &#39;Unknown&#39;</span><br><span class="line">    END name</span><br><span class="line">FROM</span><br><span class="line">    customer c</span><br><span class="line">        LEFT JOIN</span><br><span class="line">    individual i ON c.cust_id &#x3D; i.cust_id</span><br><span class="line">        LEFT JOIN</span><br><span class="line">    business b ON c.cust_id &#x3D; b.cust_id;</span><br><span class="line"></span><br><span class="line">+---------+-------------+------------------------+</span><br><span class="line">| cust_id | fed_id      | name                   |</span><br><span class="line">+---------+-------------+------------------------+</span><br><span class="line">|      10 | 04-1111111  | jamesd &#39;hand           |</span><br><span class="line">|      11 | 04-2222222  | Northeast Cooling Inc. |</span><br><span class="line">|      12 | 04-3333333  | Superior Auto Body     |</span><br><span class="line">|      13 | 04-4444444  | AAA Insurance Inc.     |</span><br><span class="line">|       1 | 111-11-1111 | James Hadley           |</span><br><span class="line">|       2 | 222-22-2222 | Susan Tingley          |</span><br><span class="line">|       3 | 333-33-3333 | Frank Tucker           |</span><br><span class="line">|       4 | 444-44-4444 | John Hayward           |</span><br><span class="line">|       5 | 555-55-5555 | Charles Frasier        |</span><br><span class="line">|       6 | 666-66-6666 | John Spencer           |</span><br><span class="line">|       7 | 777-77-7777 | Margaret Young         |</span><br><span class="line">|       8 | 888-88-8888 | Louis Blake            |</span><br><span class="line">|       9 | 999-99-9999 | Richard Farley         |</span><br><span class="line">+---------+-------------+------------------------+</span><br><span class="line">13 rows in set (0.00 sec)</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="case表达式返回表达式类型的例子"><a href="#case表达式返回表达式类型的例子" class="headerlink" title="case表达式返回表达式类型的例子"></a>case表达式返回表达式类型的例子</h3><p>例子1</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">SELECT </span><br><span class="line">    c.cust_id,</span><br><span class="line">    c.fed_id,</span><br><span class="line">    CASE</span><br><span class="line">        WHEN</span><br><span class="line">            c.cust_type_cd &#x3D; &#39;I&#39;</span><br><span class="line">        THEN</span><br><span class="line">            (SELECT </span><br><span class="line">                    CONCAT(i.fname, &#39; &#39;, i.lname)</span><br><span class="line">                FROM</span><br><span class="line">                    individual i</span><br><span class="line">                WHERE</span><br><span class="line">                    i.cust_id &#x3D; c.cust_id)</span><br><span class="line">        WHEN</span><br><span class="line">            c.cust_type_cd &#x3D; &#39;B&#39;</span><br><span class="line">        THEN</span><br><span class="line">            (SELECT </span><br><span class="line">                    b.name</span><br><span class="line">                FROM</span><br><span class="line">                    business b</span><br><span class="line">                WHERE</span><br><span class="line">                    b.cust_id &#x3D; c.cust_id)</span><br><span class="line">        ELSE &#39;Unknown&#39;</span><br><span class="line">    END name</span><br><span class="line">FROM</span><br><span class="line">    customer c;</span><br><span class="line"></span><br><span class="line">+---------+-------------+------------------------+</span><br><span class="line">| cust_id | fed_id      | name                   |</span><br><span class="line">+---------+-------------+------------------------+</span><br><span class="line">|       1 | 111-11-1111 | James Hadley           |</span><br><span class="line">|       2 | 222-22-2222 | Susan Tingley          |</span><br><span class="line">|       3 | 333-33-3333 | Frank Tucker           |</span><br><span class="line">|       4 | 444-44-4444 | John Hayward           |</span><br><span class="line">|       5 | 555-55-5555 | Charles Frasier        |</span><br><span class="line">|       6 | 666-66-6666 | John Spencer           |</span><br><span class="line">|       7 | 777-77-7777 | Margaret Young         |</span><br><span class="line">|       8 | 888-88-8888 | Louis Blake            |</span><br><span class="line">|       9 | 999-99-9999 | Richard Farley         |</span><br><span class="line">|      10 | 04-1111111  | jamesd &#39;hand           |</span><br><span class="line">|      11 | 04-2222222  | Northeast Cooling Inc. |</span><br><span class="line">|      12 | 04-3333333  | Superior Auto Body     |</span><br><span class="line">|      13 | 04-4444444  | AAA Insurance Inc.     |</span><br><span class="line">+---------+-------------+------------------------+</span><br><span class="line">13 rows in set (0.00 sec)</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>例子2</p>
<p>查询某个表达式的结果的个数</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">SELECT </span><br><span class="line">    c.cust_id,</span><br><span class="line">    c.fed_id,</span><br><span class="line">    c.cust_type_cd,</span><br><span class="line">    CASE (SELECT </span><br><span class="line">            COUNT(*)</span><br><span class="line">        FROM</span><br><span class="line">            account a</span><br><span class="line">        WHERE</span><br><span class="line">            a.cust_id &#x3D; c.cust_id)</span><br><span class="line">        WHEN 0 THEN &#39;none&#39;</span><br><span class="line">        WHEN 1 THEN &#39;1&#39;</span><br><span class="line">        WHEN 2 THEN &#39;2&#39;</span><br><span class="line">        ELSE &#39;3+&#39;</span><br><span class="line">    END num_accounts</span><br><span class="line">FROM</span><br><span class="line">    customer c;</span><br><span class="line"></span><br><span class="line">+---------+-------------+--------------+--------------+</span><br><span class="line">| cust_id | fed_id      | cust_type_cd | num_accounts |</span><br><span class="line">+---------+-------------+--------------+--------------+</span><br><span class="line">|       1 | 111-11-1111 | I            | 3+           |</span><br><span class="line">|       2 | 222-22-2222 | I            | 2            |</span><br><span class="line">|       3 | 333-33-3333 | I            | 2            |</span><br><span class="line">|       4 | 444-44-4444 | I            | 3+           |</span><br><span class="line">|       5 | 555-55-5555 | I            | 1            |</span><br><span class="line">|       6 | 666-66-6666 | I            | 2            |</span><br><span class="line">|       7 | 777-77-7777 | I            | 1            |</span><br><span class="line">|       8 | 888-88-8888 | I            | 2            |</span><br><span class="line">|       9 | 999-99-9999 | I            | 3+           |</span><br><span class="line">|      10 | 04-1111111  | B            | 2            |</span><br><span class="line">|      11 | 04-2222222  | B            | 1            |</span><br><span class="line">|      12 | 04-3333333  | B            | 1            |</span><br><span class="line">|      13 | 04-4444444  | B            | 1            |</span><br><span class="line">+---------+-------------+--------------+--------------+</span><br><span class="line">13 rows in set (0.00 sec)</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="多表查询"><a href="#多表查询" class="headerlink" title="多表查询"></a>多表查询</h2><h3 id="多表查询-需要使用连接。"><a href="#多表查询-需要使用连接。" class="headerlink" title="多表查询 需要使用连接。"></a>多表查询 需要使用连接。</h3><p>连接的结果可以在逻辑上看作是由SELECT语句指定的列组成的新表。<br>左连接与右连接的左右指的是以两张表中的哪一张为基准，它们都是外连接。<br>外连接就好像是为非基准表添加了一行全为空值的万能行，用来与基准表中找不到匹配<br>的行进行匹配。假设两个没有空值的表进行左连接，左表是基准表，<br>左表的所有行都出现在结果中，右表则可能因为无法与基准表匹配而出现是空值的字段</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">mysql&gt; select e.fname,e.lname,d.name from employee e join department d on e.dept_id &#x3D; d.dept_id;</span><br><span class="line">+----------+-----------+----------------+</span><br><span class="line">| fname    | lname     | name           |</span><br><span class="line">+----------+-----------+----------------+</span><br><span class="line">| Susan    | Hawthorne | Operations     |</span><br><span class="line">| Helen    | Fleming   | Operations     |</span><br><span class="line">| Chris    | Tucker    | Operations     |</span><br><span class="line">| Sarah    | Parker    | Operations     |</span><br><span class="line">| Jane     | Grossman  | Operations     |</span><br><span class="line">| Paula    | Roberts   | Operations     |</span><br><span class="line">| Thomas   | Ziegler   | Operations     |</span><br><span class="line">| Samantha | Jameson   | Operations     |</span><br><span class="line">| John     | Blake     | Operations     |</span><br><span class="line">| Cindy    | Mason     | Operations     |</span><br><span class="line">| Frank    | Portman   | Operations     |</span><br><span class="line">| Theresa  | Markham   | Operations     |</span><br><span class="line">| Beth     | Fowler    | Operations     |</span><br><span class="line">| Rick     | Tulman    | Operations     |</span><br><span class="line">| John     | Gooding   | Loans          |</span><br><span class="line">| Michael  | Smith     | Administration |</span><br><span class="line">| Susan    | Barker    | Administration |</span><br><span class="line">| Robert   | Tyler     | Administration |</span><br><span class="line">+----------+-----------+----------------+</span><br><span class="line">18 rows in set (0.00 sec)</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>以上列子是内连接查询的结果，如果一个表中的dept_id 列中存在某个值，但这个值在另一个表的dept_id列中不存在，<br>那么相关行的链接会失败，在结果集中会排除包含该值的行。</p>
<ul>
<li>ANSI连接语法</li>
</ul>
<p>这种旧的连接方式不包含on子句，而是在from子句中定义个表的别名。并使用逗号隔开。</p>
<p>它具有以下优点：</p>
<ol>
<li>连接条件和过滤条件被分割到on子句和where子句，使查询语句容易被理解。</li>
<li>每两个表之间的连接条件都在自己的on子句中列出，这样不容易忽略这些条件。</li>
</ol>
<p>例子：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">mysql&gt; SELECT e.fname,e.lname,d.name from employee e ,department d where e.dept_id &#x3D;d.dept_id;</span><br><span class="line">+----------+-----------+----------------+</span><br><span class="line">| fname    | lname     | name           |</span><br><span class="line">+----------+-----------+----------------+</span><br><span class="line">| Susan    | Hawthorne | Operations     |</span><br><span class="line">| Helen    | Fleming   | Operations     |</span><br><span class="line">| Chris    | Tucker    | Operations     |</span><br><span class="line">| Sarah    | Parker    | Operations     |</span><br><span class="line">| Jane     | Grossman  | Operations     |</span><br><span class="line">| Paula    | Roberts   | Operations     |</span><br><span class="line">| Thomas   | Ziegler   | Operations     |</span><br><span class="line">| Samantha | Jameson   | Operations     |</span><br><span class="line">| John     | Blake     | Operations     |</span><br><span class="line">| Cindy    | Mason     | Operations     |</span><br><span class="line">| Frank    | Portman   | Operations     |</span><br><span class="line">| Theresa  | Markham   | Operations     |</span><br><span class="line">| Beth     | Fowler    | Operations     |</span><br><span class="line">| Rick     | Tulman    | Operations     |</span><br><span class="line">| John     | Gooding   | Loans          |</span><br><span class="line">| Michael  | Smith     | Administration |</span><br><span class="line">| Susan    | Barker    | Administration |</span><br><span class="line">| Robert   | Tyler     | Administration |</span><br><span class="line">+----------+-----------+----------------+</span><br><span class="line">18 rows in set (0.00 sec)</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<ul>
<li><p>连接两次使用同一张表时，可以为表取别名。别名即表的实例，数据库服务器可以区分所引用的实例。</p>
</li>
<li><p>自连接</p>
</li>
</ul>
<p>一张表中存这雇员的信息和一个指向本表的外键。<br>此时要查询每个雇员的姓名和主管道的姓名，即可使用自连接。</p>
<p>例子：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select e.fname,e_mgr.fname as emgrName from employee e  inner join employee e_mgr on e.superior_emp_id &#x3D;e_mgr.emp_id;</span><br><span class="line">+----------+----------+</span><br><span class="line">| fname    | emgrName |</span><br><span class="line">+----------+----------+</span><br><span class="line">| Susan    | Robert   |</span><br><span class="line">| John     | Susan    |</span><br><span class="line">| Helen    | Susan    |</span><br><span class="line">| Chris    | Helen    |</span><br><span class="line">| Sarah    | Helen    |</span><br><span class="line">| Jane     | Helen    |</span><br><span class="line">| Paula    | Susan    |</span><br><span class="line">| Thomas   | Paula    |</span><br><span class="line">| Samantha | Paula    |</span><br><span class="line">| John     | Susan    |</span><br><span class="line">| Cindy    | John     |</span><br><span class="line">| Frank    | John     |</span><br><span class="line">| Theresa  | Susan    |</span><br><span class="line">| Beth     | Theresa  |</span><br><span class="line">| Rick     | Theresa  |</span><br><span class="line">+----------+----------+</span><br><span class="line">15 rows in set (0.00 sec)</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<ul>
<li>自连接的不等连接</li>
</ul>
<p>每一个组中的成员与组里的别的成员进行一场象棋比赛。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">&#x2F;&#x2F;这样会产生重复记录，即a VS b  和b VS a</span><br><span class="line">mysql&gt; select e1.fname,e1.lname, &#39;VS&#39; vs , e2.fname,e2.lname from employee e1 inner join employee e2 on e1.emp_id  !&#x3D;e2.emp_id where e1.title &#x3D;&#39;Teller&#39; and e2.title &#x3D;&#39;Teller&#39;;</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; 所以需要过滤，采用&gt;的条件</span><br><span class="line"></span><br><span class="line">mysql&gt; select e1.fname,e1.lname, &#39;VS&#39; vs , e2.fname,e2.lname from employee e1 inner join employee e2 on e1.emp_id  &gt;e2.emp_id where e1.title &#x3D;&#39;Teller&#39; and e2.title &#x3D;&#39;Teller&#39;;</span><br><span class="line">+----------+----------+----+----------+----------+</span><br><span class="line">| fname    | lname    | vs | fname    | lname    |</span><br><span class="line">+----------+----------+----+----------+----------+</span><br><span class="line">| Sarah    | Parker   | VS | Chris    | Tucker   |</span><br><span class="line">| Jane     | Grossman | VS | Chris    | Tucker   |</span><br><span class="line">| Jane     | Grossman | VS | Sarah    | Parker   |</span><br><span class="line">| Thomas   | Ziegler  | VS | Chris    | Tucker   |</span><br><span class="line">| Thomas   | Ziegler  | VS | Sarah    | Parker   |</span><br><span class="line">| Thomas   | Ziegler  | VS | Jane     | Grossman |</span><br><span class="line">| Samantha | Jameson  | VS | Chris    | Tucker   |</span><br><span class="line">| Samantha | Jameson  | VS | Sarah    | Parker   |</span><br><span class="line">| Samantha | Jameson  | VS | Jane     | Grossman |</span><br><span class="line">| Samantha | Jameson  | VS | Thomas   | Ziegler  |</span><br><span class="line">| Cindy    | Mason    | VS | Chris    | Tucker   |</span><br><span class="line">| Cindy    | Mason    | VS | Sarah    | Parker   |</span><br><span class="line">| Cindy    | Mason    | VS | Jane     | Grossman |</span><br><span class="line">| Cindy    | Mason    | VS | Thomas   | Ziegler  |</span><br><span class="line">| Cindy    | Mason    | VS | Samantha | Jameson  |</span><br><span class="line">| Frank    | Portman  | VS | Chris    | Tucker   |</span><br><span class="line">| Frank    | Portman  | VS | Sarah    | Parker   |</span><br><span class="line">| Frank    | Portman  | VS | Jane     | Grossman |</span><br><span class="line">| Frank    | Portman  | VS | Thomas   | Ziegler  |</span><br><span class="line">| Frank    | Portman  | VS | Samantha | Jameson  |</span><br><span class="line">| Frank    | Portman  | VS | Cindy    | Mason    |</span><br><span class="line">| Beth     | Fowler   | VS | Chris    | Tucker   |</span><br><span class="line">| Beth     | Fowler   | VS | Sarah    | Parker   |</span><br><span class="line">| Beth     | Fowler   | VS | Jane     | Grossman |</span><br><span class="line">| Beth     | Fowler   | VS | Thomas   | Ziegler  |</span><br><span class="line">| Beth     | Fowler   | VS | Samantha | Jameson  |</span><br><span class="line">| Beth     | Fowler   | VS | Cindy    | Mason    |</span><br><span class="line">| Beth     | Fowler   | VS | Frank    | Portman  |</span><br><span class="line">| Rick     | Tulman   | VS | Chris    | Tucker   |</span><br><span class="line">| Rick     | Tulman   | VS | Sarah    | Parker   |</span><br><span class="line">| Rick     | Tulman   | VS | Jane     | Grossman |</span><br><span class="line">| Rick     | Tulman   | VS | Thomas   | Ziegler  |</span><br><span class="line">| Rick     | Tulman   | VS | Samantha | Jameson  |</span><br><span class="line">| Rick     | Tulman   | VS | Cindy    | Mason    |</span><br><span class="line">| Rick     | Tulman   | VS | Frank    | Portman  |</span><br><span class="line">| Rick     | Tulman   | VS | Beth     | Fowler   |</span><br><span class="line">+----------+----------+----+----------+----------+</span><br><span class="line">36 rows in set (0.00 sec)</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="外连接"><a href="#外连接" class="headerlink" title="外连接"></a>外连接</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">LEFT JOIN (等价于LEFT OUT JOIN) 关键字从左表（table1）返回所有的行，即使右表（table2）中没有匹配。</span><br><span class="line">如果右表中没有匹配，则结果为 NULL。</span><br><span class="line"></span><br><span class="line">例子：</span><br><span class="line">SELECT  websites.name, access_log.count, access_log.date</span><br><span class="line">FROM   websites  LEFT JOIN　access_log ON websites.id &#x3D; access_log.site_id　ORDER BY access_log.count DESC;</span><br><span class="line"></span><br><span class="line">+---------------+-------+------------+</span><br><span class="line">| name          | count | date       |</span><br><span class="line">+---------------+-------+------------+</span><br><span class="line">| Facebook      |   545 | 2016-05-16 |</span><br><span class="line">| Google        |   230 | 2016-05-14 |</span><br><span class="line">| 菜鸟教程      |   220 | 2016-05-15 |</span><br><span class="line">| Facebook      |   205 | 2016-05-14 |</span><br><span class="line">| 菜鸟教程      |   201 | 2016-05-17 |</span><br><span class="line">| 菜鸟教程      |   100 | 2016-05-13 |</span><br><span class="line">| Google        |    45 | 2016-05-10 |</span><br><span class="line">| 微博          |    13 | 2016-05-15 |</span><br><span class="line">| 淘宝          |    10 | 2016-05-14 |</span><br><span class="line">| stackoverflow |  NULL | NULL       |</span><br><span class="line">+---------------+-------+------------+</span><br><span class="line"></span><br><span class="line">RIGHT JOIN 与INNER JOIN的意思相同，不做过多的解释。</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="union和union-all关键字"><a href="#union和union-all关键字" class="headerlink" title="union和union all关键字"></a>union和union all关键字</h3><ul>
<li>要使用UNION或者UNION all 必须满足以下两个条件：</li>
</ul>
<p>两个数据集合必须具有相同的列；<br>两个数据集中对应的列的数据类型必须时一致的（或者时服务器中数据类型可以转换）；</p>
<ul>
<li>区别：</li>
</ul>
<p>union对连接后的集合排序并去除重复项，而union all保留重复项。</p>
<p>例子：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">mysql&gt; select &#39;ind&#39; type_cd,cust_id,lname name from individual union all select &#39;bus&#39; type_cd,cust_id,name from business;</span><br><span class="line">+---------+---------+------------------------+</span><br><span class="line">| type_cd | cust_id | name                   |</span><br><span class="line">+---------+---------+------------------------+</span><br><span class="line">| ind     |       1 | Hadley                 |</span><br><span class="line">| ind     |       2 | Tingley                |</span><br><span class="line">| ind     |       3 | Tucker                 |</span><br><span class="line">| ind     |       4 | Hayward                |</span><br><span class="line">| ind     |       5 | Frasier                |</span><br><span class="line">| ind     |       6 | Spencer                |</span><br><span class="line">| ind     |       7 | Young                  |</span><br><span class="line">| ind     |       8 | Blake                  |</span><br><span class="line">| ind     |       9 | Farley                 |</span><br><span class="line">| bus     |      10 | Chilton Engineering    |</span><br><span class="line">| bus     |      11 | Northeast Cooling Inc. |</span><br><span class="line">| bus     |      12 | Superior Auto Body     |</span><br><span class="line">| bus     |      13 | AAA Insurance Inc.     |</span><br><span class="line">+---------+---------+------------------------+</span><br><span class="line">13 rows in set (0.00 sec)</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<ul>
<li>对复合查询结果排序</li>
</ul>
<p>如果需要对复合查询的结果进行排序，那么可以在最后一个查询后面增加order by 子句。当在order by 子句中指定要排序的列时，需要从复合查询的第一个查询中选取列名。所以，建议对两个查询的各列定义不同的别名。</p>
<h3 id="子查询"><a href="#子查询" class="headerlink" title="子查询"></a>子查询</h3><p>子查询返回的结果集类型决定了它可能如何被使用。任何查询返回的数据在包含语句执行完成之后都会被丢弃，说这事的则查询像一个具有作用域的临时表。这意味着sql执行完毕，子查询结果所占用的内存将会被清空。</p>
<h4 id="非关联子查询"><a href="#非关联子查询" class="headerlink" title="非关联子查询"></a>非关联子查询</h4><p>非关联子查询是指，它可以单独执行不需要引用包含语句中的任何内容。</p>
<ul>
<li>如果在等式条件下使用子查询，而子查询返回多行结果，则会出错。</li>
</ul>
<p>例子：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select account_id,product_cd,cust_id from account where open_emp_id &lt;&gt; (select e.emp_id from employee e inner join  branch b on e.assigned_branch_id &#x3D;b.branch_id where e.title&#x3D;&#39;Teller&#39; AND b.city&#x3D;&#39;Woburn&#39;);</span><br><span class="line">ERROR 1242 (21000): Subquery returns more than 1 row</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>错误的原因时open_emp_id 不能等于结果集。</p>
<ul>
<li>多行单列子查询，即多行结果可以在非等式的 IN和NOT IN 运算符中使用。</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select branch_id ,name,city from branch where name In (&#39;HeadQuarters&#39;,&#39;Quincy Branch&#39;);</span><br><span class="line">+-----------+---------------+---------+</span><br><span class="line">| branch_id | name          | city    |</span><br><span class="line">+-----------+---------------+---------+</span><br><span class="line">|         1 | Headquarters  | Waltham |</span><br><span class="line">|         3 | Quincy Branch | Quincy  |</span><br><span class="line">+-----------+---------------+---------+</span><br><span class="line">2 rows in set (0.00 sec)</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<ul>
<li>ALL和ANY运算符（不常用。一般使用IN和NOT IN代替。）</li>
</ul>
<p>all运算符用于将某单值与集合中的每个值比较，而any用于个结果集中的每个成员比较。与all不同的时，any运算符中，只要有一个比较成立，则条件为真。all需要每一个都成立，才为真。</p>
<p>例子：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">mysql&gt; select emp_id,fname,lname,title from employee where emp_id &lt;&gt; all (select superior_emp_id from employee where superior_emp_id is NOT NULL);</span><br><span class="line">+--------+----------+----------+----------------+</span><br><span class="line">| emp_id | fname    | lname    | title          |</span><br><span class="line">+--------+----------+----------+----------------+</span><br><span class="line">|      1 | Michael  | Smith    | President      |</span><br><span class="line">|      2 | Susan    | Barker   | Vice President |</span><br><span class="line">|      5 | John     | Gooding  | Loan Manager   |</span><br><span class="line">|      7 | Chris    | Tucker   | Teller         |</span><br><span class="line">|      8 | Sarah    | Parker   | Teller         |</span><br><span class="line">|      9 | Jane     | Grossman | Teller         |</span><br><span class="line">|     11 | Thomas   | Ziegler  | Teller         |</span><br><span class="line">|     12 | Samantha | Jameson  | Teller         |</span><br><span class="line">|     14 | Cindy    | Mason    | Teller         |</span><br><span class="line">|     15 | Frank    | Portman  | Teller         |</span><br><span class="line">|     17 | Beth     | Fowler   | Teller         |</span><br><span class="line">|     18 | Rick     | Tulman   | Teller         |</span><br><span class="line">+--------+----------+----------+----------------+</span><br><span class="line">12 rows in set (0.00 sec)</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h4 id="关联子查询"><a href="#关联子查询" class="headerlink" title="关联子查询"></a>关联子查询</h4><ul>
<li>与非关联子查询不同，关联子查询不是在包含语句执行前执行一次，而是为每一个候选行都执行一次。</li>
</ul>
<p>下面的例子中首先关联查询计算每个客户的账户数，接着包含查询检索出哪些拥有两个账户。</p>
<p>例子：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">mysql&gt; select c.cust_id,c.cust_type_cd,c.city from customer c where 2 &#x3D;(select count(*) from account a where a.cust_id &#x3D;c.cust_id);</span><br><span class="line">+---------+--------------+---------+</span><br><span class="line">| cust_id | cust_type_cd | city    |</span><br><span class="line">+---------+--------------+---------+</span><br><span class="line">|       2 | I            | Woburn  |</span><br><span class="line">|       3 | I            | Quincy  |</span><br><span class="line">|       6 | I            | Waltham |</span><br><span class="line">|       8 | I            | Salem   |</span><br><span class="line">|      10 | B            | Salem   |</span><br><span class="line">+---------+--------------+---------+</span><br><span class="line">5 rows in set (0.01 sec)</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<ul>
<li>exists运算符</li>
</ul>
<p>如果只关心存在关系，而不在乎数量就可以使用exists关键字。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">&#x2F;&#x2F;以下时exists和not exists的用法。</span><br><span class="line">mysql&gt; select a.account_id ,a.product_cd,a.cust_id,a.avail_balance from account a where not exists (select 1 from transaction t where t.account_id &#x3D;a.account_id and t.txn_date &#x3D;&#39;2008-09-22&#39;);</span><br><span class="line">+------------+------------+---------+---------------+</span><br><span class="line">| account_id | product_cd | cust_id | avail_balance |</span><br><span class="line">+------------+------------+---------+---------------+</span><br><span class="line">|          1 | CHK        |       1 |       1057.75 |</span><br><span class="line">|          2 | SAV        |       1 |        500.00 |</span><br><span class="line">|          3 | CD         |       1 |       3000.00 |</span><br><span class="line">|          4 | CHK        |       2 |       2258.02 |</span><br><span class="line">|          5 | SAV        |       2 |        200.00 |</span><br><span class="line">|          7 | CHK        |       3 |       1057.75 |</span><br><span class="line">|          8 | MM         |       3 |       2212.50 |</span><br><span class="line">|         10 | CHK        |       4 |        534.12 |</span><br><span class="line">|         11 | SAV        |       4 |        767.77 |</span><br><span class="line">|         12 | MM         |       4 |       5487.09 |</span><br><span class="line">|         13 | CHK        |       5 |       2237.97 |</span><br><span class="line">|         14 | CHK        |       6 |        122.37 |</span><br><span class="line">|         15 | CD         |       6 |      10000.00 |</span><br><span class="line">|         17 | CD         |       7 |       5000.00 |</span><br><span class="line">|         18 | CHK        |       8 |       3487.19 |</span><br><span class="line">|         19 | SAV        |       8 |        387.99 |</span><br><span class="line">|         21 | CHK        |       9 |        125.67 |</span><br><span class="line">|         22 | MM         |       9 |       9345.55 |</span><br><span class="line">|         23 | CD         |       9 |       1500.00 |</span><br><span class="line">|         24 | CHK        |      10 |      23575.12 |</span><br><span class="line">|         25 | BUS        |      10 |          0.00 |</span><br><span class="line">|         27 | BUS        |      11 |       9345.55 |</span><br><span class="line">|         28 | CHK        |      12 |      38552.05 |</span><br><span class="line">|         29 | SBL        |      13 |      50000.00 |</span><br><span class="line">+------------+------------+---------+---------------+</span><br><span class="line">24 rows in set (0.00 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; select a.account_id ,a.product_cd,a.cust_id,a.avail_balance from account a where exists (select 1 from transaction t where t.account_id &#x3D;a.account_id and t.txn_date &#x3D;&#39;2008-09-22&#39;);</span><br><span class="line">Empty set (0.01 sec)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">子查询可能返回1或者0 ，使用1代表是否至少能返回一行。</span><br><span class="line"></span><br></pre></td></tr></table></figure>


<ul>
<li>update语句的关联查询</li>
</ul>
<p>例子：</p>
<p>查询出每个账户的最新交易日期，然后修改账户的每一行的last_activity_date字段。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">mysql&gt; update account a set a.last_activity_date &#x3D;(select max(t.txn_date) from transaction t where t.account_id &#x3D;a.account_id);</span><br><span class="line">Query OK, 19 rows affected (0.15 sec)</span><br><span class="line">Rows matched: 24  Changed: 19  Warnings: 0</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<ul>
<li>delete语句中的关联查询</li>
</ul>
<p>mysql中的delete语句使用关联子查询时，无论如何都不能使用表的别名。(暂时不知道原因)</p>
<p>例子：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">mysql&gt; delete from department where not exists (select 1 from employee  where employee.dept_id&#x3D;department.dept_id);</span><br><span class="line">Query OK, 0 rows affected (0.00 sec)</span><br><span class="line"></span><br></pre></td></tr></table></figure>


<h4 id="如何使用子查询"><a href="#如何使用子查询" class="headerlink" title="如何使用子查询"></a>如何使用子查询</h4><ul>
<li>子查询作为数据源</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">mysql&gt; select d.dept_id ,d.name ,e_ent.how_many num_employees from department d inner join (select dept_id ,count(*) how_many from employee group by dept_id) e_ent on d.dept_id&#x3D;e_ent.dept_id;</span><br><span class="line">+---------+----------------+---------------+</span><br><span class="line">| dept_id | name           | num_employees |</span><br><span class="line">+---------+----------------+---------------+</span><br><span class="line">|       1 | Operations     |            14 |</span><br><span class="line">|       2 | Loans          |             1 |</span><br><span class="line">|       3 | Administration |             3 |</span><br><span class="line">+---------+----------------+---------------+</span><br><span class="line">3 rows in set (0.00 sec)</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>子查询在from子句中必须是非关联的，它必须首先执行，然后一直保存在内存中直至包含查询执行完毕。</p>
<ul>
<li>子查询作为过滤条件</li>
</ul>
<p>子查询作为过滤条件出现在having条件中，不会出现在where条件中。</p>
<p>例子：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">SELECT </span><br><span class="line">    open_emp_id, COUNT(*) how_many</span><br><span class="line">FROM</span><br><span class="line">    account</span><br><span class="line">GROUP BY open_emp_id</span><br><span class="line">HAVING COUNT(*) &#x3D; (SELECT </span><br><span class="line">        MAX(emp_cnt.how_many)</span><br><span class="line">    FROM</span><br><span class="line">        (SELECT </span><br><span class="line">            COUNT(*) how_many</span><br><span class="line">        FROM</span><br><span class="line">            account</span><br><span class="line">        GROUP BY open_emp_id) emp_cnt);</span><br><span class="line"></span><br><span class="line">+-------------+----------+</span><br><span class="line">| open_emp_id | how_many |</span><br><span class="line">+-------------+----------+</span><br><span class="line">|           1 |        8 |</span><br><span class="line">+-------------+----------+</span><br><span class="line">1 row in set (0.00 sec)</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<ul>
<li>子查询作为表达式生成器</li>
</ul>
<p>例子：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">SELECT </span><br><span class="line">    emp.emp_id,</span><br><span class="line">    CONCAT(emp.fname, &#39; &#39;, emp.lname) emp_name,</span><br><span class="line">    (SELECT </span><br><span class="line">            CONCAT(boss.fname, &#39; &#39;, boss.lname)</span><br><span class="line">        FROM</span><br><span class="line">            employee boss</span><br><span class="line">        WHERE</span><br><span class="line">            boss.emp_id &#x3D; emp.superior_emp_id) boss_name</span><br><span class="line">FROM</span><br><span class="line">    employee emp</span><br><span class="line">WHERE</span><br><span class="line">    emp.superior_emp_id IS NOT NULL</span><br><span class="line">ORDER BY (SELECT </span><br><span class="line">        boss.lname</span><br><span class="line">    FROM</span><br><span class="line">        employee boss</span><br><span class="line">    WHERE</span><br><span class="line">        boss.emp_id &#x3D; emp.superior_emp_id) , emp.lname;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">+--------+------------------+-----------------+</span><br><span class="line">| emp_id | emp_name         | boss_name       |</span><br><span class="line">+--------+------------------+-----------------+</span><br><span class="line">|     14 | Cindy Mason      | John Blake      |</span><br><span class="line">|     15 | Frank Portman    | John Blake      |</span><br><span class="line">|      9 | Jane Grossman    | Helen Fleming   |</span><br><span class="line">|      8 | Sarah Parker     | Helen Fleming   |</span><br><span class="line">|      7 | Chris Tucker     | Helen Fleming   |</span><br><span class="line">|     13 | John Blake       | Susan Hawthorne |</span><br><span class="line">|      6 | Helen Fleming    | Susan Hawthorne |</span><br><span class="line">|      5 | John Gooding     | Susan Hawthorne |</span><br><span class="line">|     16 | Theresa Markham  | Susan Hawthorne |</span><br><span class="line">|     10 | Paula Roberts    | Susan Hawthorne |</span><br><span class="line">|     17 | Beth Fowler      | Theresa Markham |</span><br><span class="line">|     18 | Rick Tulman      | Theresa Markham |</span><br><span class="line">|     12 | Samantha Jameson | Paula Roberts   |</span><br><span class="line">|     11 | Thomas Ziegler   | Paula Roberts   |</span><br><span class="line">|      4 | Susan Hawthorne  | Robert Tyler    |</span><br><span class="line">+--------+------------------+-----------------+</span><br><span class="line">15 rows in set (0.00 sec)</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>













































































    </div>

    
    
    

      <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/sql%E5%AD%A6%E4%B9%A0%E6%8C%87%E5%8D%97/" rel="tag"># sql学习指南</a>
          </div>

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/2017-11-06/tomcat%E5%AD%A6%E4%B9%A0-%E7%BB%93%E6%9E%84%E5%92%8C%E5%9F%BA%E6%9C%AC%E9%85%8D%E7%BD%AE/" rel="prev" title="tomcat学习-结构和基本配置">
      <i class="fa fa-chevron-left"></i> tomcat学习-结构和基本配置
    </a></div>
      <div class="post-nav-item">
    <a href="/2017-11-20/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/" rel="next" title="正则表达式">
      正则表达式 <i class="fa fa-chevron-right"></i>
    </a></div>
    </div>
      </footer>
    
  </article>
  
  
  



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%9F%A5%E8%AF%A2%E6%9C%BA%E5%88%B6"><span class="nav-number">1.</span> <span class="nav-text">查询机制</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%9F%A5%E8%AF%A2%E8%AF%AD%E5%8F%A5"><span class="nav-number">2.</span> <span class="nav-text">查询语句</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#select%E5%AD%90%E5%8F%A5"><span class="nav-number">2.1.</span> <span class="nav-text">select子句</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%88%97%E7%9A%84%E5%88%AB%E5%90%8D"><span class="nav-number">2.1.1.</span> <span class="nav-text">列的别名</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%8E%BB%E9%99%A4%E9%87%8D%E5%A4%8D%E8%A1%8C"><span class="nav-number">2.1.2.</span> <span class="nav-text">去除重复行</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#from-%E5%AD%90%E5%8F%A5"><span class="nav-number">2.2.</span> <span class="nav-text">from 子句</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#where%E5%AD%90%E5%8F%A5"><span class="nav-number">2.3.</span> <span class="nav-text">where子句</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#group-by%E5%AD%90%E5%8F%A5%E5%92%8Chaving%E5%AD%90%E5%8F%A5"><span class="nav-number">2.4.</span> <span class="nav-text">group by子句和having子句</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#order%E5%AD%90%E5%8F%A5"><span class="nav-number">2.5.</span> <span class="nav-text">order子句</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%BF%87%E6%BB%A4"><span class="nav-number">3.</span> <span class="nav-text">过滤</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#NULL%E5%85%B3%E9%94%AE%E5%AD%97"><span class="nav-number">4.</span> <span class="nav-text">NULL关键字</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#case-when-else-end-%E6%9D%A1%E4%BB%B6%E9%80%BB%E8%BE%91%E8%AF%AD%E5%8F%A5"><span class="nav-number">5.</span> <span class="nav-text">case when else end 条件逻辑语句</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#case%E8%A1%A8%E8%BE%BE%E5%BC%8F%E8%BF%94%E5%9B%9E%E5%AD%97%E7%AC%A6%E4%B8%B2%E7%9A%84%E4%BE%8B%E5%AD%90"><span class="nav-number">5.1.</span> <span class="nav-text">case表达式返回字符串的例子</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#case%E8%A1%A8%E8%BE%BE%E5%BC%8F%E8%BF%94%E5%9B%9E%E8%A1%A8%E8%BE%BE%E5%BC%8F%E7%B1%BB%E5%9E%8B%E7%9A%84%E4%BE%8B%E5%AD%90"><span class="nav-number">5.2.</span> <span class="nav-text">case表达式返回表达式类型的例子</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%A4%9A%E8%A1%A8%E6%9F%A5%E8%AF%A2"><span class="nav-number">6.</span> <span class="nav-text">多表查询</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%A4%9A%E8%A1%A8%E6%9F%A5%E8%AF%A2-%E9%9C%80%E8%A6%81%E4%BD%BF%E7%94%A8%E8%BF%9E%E6%8E%A5%E3%80%82"><span class="nav-number">6.1.</span> <span class="nav-text">多表查询 需要使用连接。</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%A4%96%E8%BF%9E%E6%8E%A5"><span class="nav-number">6.2.</span> <span class="nav-text">外连接</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#union%E5%92%8Cunion-all%E5%85%B3%E9%94%AE%E5%AD%97"><span class="nav-number">6.3.</span> <span class="nav-text">union和union all关键字</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%AD%90%E6%9F%A5%E8%AF%A2"><span class="nav-number">6.4.</span> <span class="nav-text">子查询</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E9%9D%9E%E5%85%B3%E8%81%94%E5%AD%90%E6%9F%A5%E8%AF%A2"><span class="nav-number">6.4.1.</span> <span class="nav-text">非关联子查询</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%85%B3%E8%81%94%E5%AD%90%E6%9F%A5%E8%AF%A2"><span class="nav-number">6.4.2.</span> <span class="nav-text">关联子查询</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%A6%82%E4%BD%95%E4%BD%BF%E7%94%A8%E5%AD%90%E6%9F%A5%E8%AF%A2"><span class="nav-number">6.4.3.</span> <span class="nav-text">如何使用子查询</span></a></li></ol></li></ol></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="陈伟杰"
      src="/images/favicon.ico">
  <p class="site-author-name" itemprop="name">陈伟杰</p>
  <div class="site-description" itemprop="description">学习，坚持。</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">75</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">26</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">68</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://github.com/chenwj1103" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;chenwj1103" rel="noopener" target="_blank"><i class="github fa-fw"></i>GitHub</a>
      </span>
  </div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2020</span>
  <span class="with-love">
    <i class="user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">陈伟杰</span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-chart-area"></i>
    </span>
      <span class="post-meta-item-text">站点总字数：</span>
    <span title="站点总字数">638k</span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-coffee"></i>
    </span>
      <span class="post-meta-item-text">站点阅读时长 &asymp;</span>
    <span title="站点阅读时长">9:40</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Gemini</a> 强力驱动
  </div>

        
<div class="busuanzi-count">
  <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
    <span class="post-meta-item" id="busuanzi_container_site_uv" style="display: none;">
      <span class="post-meta-item-icon">
        <i class="user"></i>
      </span>
      <span class="site-uv" title="总访客量">
        <span id="busuanzi_value_site_uv"></span>
      </span>
    </span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item" id="busuanzi_container_site_pv" style="display: none;">
      <span class="post-meta-item-icon">
        <i class="fa fa-eye"></i>
      </span>
      <span class="site-pv" title="总访问量">
        <span id="busuanzi_value_site_pv"></span>
      </span>
    </span>
</div>








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>




  




  
<script src="/js/local-search.js"></script>













  

  

</body>
</html>
